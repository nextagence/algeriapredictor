
      
        
          <meta charset="UTF-8">
          <meta name="viewport" content="width=device-width, initial-scale=1.0">
          <title>متنبئ الذكاء الاصطناعي</title>
          <script src="https://cdn.tailwindcss.com"></script>
          <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
          <link rel="preconnect" href="https://fonts.googleapis.com">
          <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="">
          <link href="https://fonts.googleapis.com/css2?family=Share+Tech+Mono&amp;display=swap" rel="stylesheet">
          <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&amp;display=swap" rel="stylesheet">
          <style>
            body {
              /* font-family: "Share Tech Mono", monospace; */ /* Keep or change to Arabic font */
              font-family: "Cairo", sans-serif; /* Example using Cairo */
              text-shadow: 0 0 3px rgba(57, 255, 20, 0.4);
              background-color: #000;
              overflow-x: hidden;
              color: rgb(74 222 128 / 1);
            }
            .cursor::after {
              content: "_";
              animation: blink 1s step-end infinite;
            }
            @keyframes blink {
              50% {
                opacity: 0;
              }
            }
            .hacker-input:focus {
              box-shadow: 0 0 15px rgba(57, 255, 20, 0.6);
            }
            .blinking-red {
              color: #ef4444;
              animation: blink-red 1.5s step-end infinite;
            }
            @keyframes blink-red {
              50% {
                opacity: 0.5;
              }
            }
            .shake {
              animation: shake 0.5s cubic-bezier(0.36, 0.07, 0.19, 0.97) both;
            }
            @keyframes shake {
              10%,
              90% {
                transform: translate3d(-1px, 0, 0);
              }
              20%,
              80% {
                transform: translate3d(2px, 0, 0);
              }
              30%,
              50%,
              70% {
                transform: translate3d(-4px, 0, 0);
              }
              40%,
              60% {
                transform: translate3d(4px, 0, 0);
              }
            }
            .signal-card {
              transition: transform 0.3s ease, box-shadow 0.3s ease;
            }
            .signal-card:hover:not(.locked-card) {
              transform: translateY(-5px);
              box-shadow: 0 0 25px rgba(57, 255, 20, 0.5);
            }
            #chat-widget {
              transition: all 0.3s ease-in-out;
            }
            #chat-messages::-webkit-scrollbar {
              width: 4px;
            }
            #chat-messages::-webkit-scrollbar-track {
              background: #1a1a1a;
            }
            #chat-messages::-webkit-scrollbar-thumb {
              background: #00ff00;
            }
            #live-feed-container {
              /* Adjusted gradient for RTL */
              mask-image: linear-gradient(
                to left,
                transparent,
                black 5%,
                black 95%,
                transparent
              );
              -webkit-mask-image: linear-gradient(
                to left,
                transparent,
                black 5%,
                black 95%,
                transparent
              );
            }
            .winner-item {
              /* Adjusted animation for RTL */
              animation: slideInFromRight 0.5s ease-out forwards;
              gap: 10px;
            }
            /* Adjusted animation keyframe for RTL */
            @keyframes slideInFromRight {
              from {
                opacity: 0;
                transform: translateX(30px);
              }
              to {
                opacity: 1;
                transform: translateX(0);
              }
            }
            .btn-disabled {
              background-color: #4a5568;
              cursor: not-allowed;
              color: #a0aec0;
            }
            .multiplier-rising {
              text-shadow: 0 0 20px rgba(255, 255, 255, 0.8);
              color: #63b3ed;
            }
            .multiplier-final {
              color: #48bb78;
              text-shadow: 0 0 20px rgba(72, 187, 120, 0.8);
            }
            .custom-select-options {
              animation: fadeIn 0.2s ease-out;
            }
            @keyframes fadeIn {
              from {
                opacity: 0;
                transform: translateY(-10px);
              }
              to {
                opacity: 1;
                transform: translateY(0);
              }
            }
            .mine-cell {
              background-color: #1a202c;
              border-radius: 0.375rem;
              transition: all 0.3s ease-in-out;
              cursor: default;
            }
            .mine-cell.safe {
              background-image: url(https://www.freeiconspng.com/uploads/yellow-christmas-star-png-18.png);
              background-size: 70%;
              background-position: center;
              background-repeat: no-repeat;
              background-color: #38a169;
              transform: scale(1.05);
              box-shadow: 0 0 15px rgba(56, 161, 105, 0.7);
            }
            .game-console {
              background-color: #0d1117;
              border-color: #30363d;
              height: 8rem;
            }
            .game-console p {
              animation: fadeInConsole 0.3s ease-in;
              color: #a5d6ff;
            }
            .game-console p.success {
              color: #56d364;
            }
            .game-console p.error {
              color: #f85149;
            }
            @keyframes fadeInConsole {
              from {
                opacity: 0;
              }
              to {
                opacity: 1;
              }
            }
            .penalty-gate-post {
              background-color: #a0aec0;
            }
            .penalty-target-zone {
              background-color: rgba(255, 255, 255, 0.1);
              border: 2px dashed rgba(255, 255, 255, 0.2);
              transition: all 0.3s ease-in-out;
            }
            .penalty-target-zone.highlight {
              background-color: rgba(56, 161, 105, 0.8);
              border-color: #f6e05e;
              box-shadow: 0 0 25px rgba(56, 161, 105, 0.9);
            }
            .number-signal-display {
              color: #48bb78;
              text-shadow: 0 0 20px rgba(72, 187, 120, 0.8);
            }
            #chicken-road-viewport {
              overflow: hidden;
              background: linear-gradient(to bottom, #1a202c, #2d3748);
            }
            #chicken-road-track {
              transition: transform 0.2s linear;
            }
            .chicken-stove {
              background-color: #4a5568;
              border: 2px solid #718096;
              box-shadow: 0 4px 0 #2d3748;
            }
            #chicken-icon {
              transition: transform 0.2s ease-out;
              z-index: 10;
            }
            .locked-card {
              cursor: not-allowed;
              pointer-events: none;
            }
            /* Animation for the Lottery button */
            .shimmer-btn {
              position: relative;
              overflow: hidden;
              background: #1a202c; /* Base color */
              border: 1px solid #f6e05e;
              color: #f6e05e;
              transition: all 0.3s;
            }
            .shimmer-btn:hover {
              box-shadow: 0 0 15px rgba(246, 224, 94, 0.6);
            }
            .shimmer-btn::before {
              content: "";
              position: absolute;
              top: 0;
              /* Adjusted for RTL */
              right: -150%;
              left: auto;
              width: 75%;
              height: 100%;
              background: linear-gradient(
                /* Adjusted for RTL */ -90deg,
                transparent,
                rgba(246, 224, 94, 0.4),
                transparent
              );
              /* Adjusted for RTL */
              animation: shimmer-rtl 5s infinite linear;
            }
            /* Added RTL shimmer animation */
            @keyframes shimmer-rtl {
              0% {
                transform: translateX(0);
              }
              100% {
                transform: translateX(-350%);
              }
            }
            .blinking-text {
              animation: blink-gray-red 1.5s infinite;
            }
            @keyframes blink-gray-red {
              0%,
              100% {
                color: #6b7280;
              } /* gray-500 */
              50% {
                color: #ef4444;
              } /* red-500 */
            }
            .locked-card .card-image {
              filter: blur(4px);
              transform: scale(1.1);
            }
            /* RTL adjustments */
            .ltr\:mr-4 {
              margin-right: 1rem;
            }
            .rtl\:ml-4 {
              margin-left: 1rem;
            }
            .ltr\:mr-2 {
              margin-right: 0.5rem;
            }
            .rtl\:ml-2 {
              margin-left: 0.5rem;
            }
            .rtl\:mr-4 {
              margin-right: 1rem;
            } /* For live feed icons */
            #wheel-pointer {
              /* Adjusted for RTL */
              right: -4px;
              border-right: 25px solid #dc2626; /* red-600 */
              border-left: 0;
              border-top: 15px solid transparent;
              border-bottom: 15px solid transparent;
              /* Rotate 0 for RTL pointer */
              transform: translateY(-50%) rotate(0);
            }
            @media (min-width: 640px) {
              #wheel-pointer {
                border-right-width: 30px;
                border-top-width: 20px;
                border-bottom-width: 20px;
              }
            }
          </style>
        
        
          <div id="main-content" class="min-h-screen flex flex-col items-center justify-center p-4">
            <header class="text-center mb-12">
              <h1 class="text-3xl md:text-5xl tracking-widest cursor-default">
                <span id="typing-text">متنبئ الذكاء الاصطناعي</span><span class="cursor"></span>
              </h1>
            </header>
            <button id="openModalBtn" class="bg-transparent border-2 border-green-400 text-green-400 px-8 py-3 text-lg hover:bg-green-400 hover:text-black transition-all duration-300 active:scale-95 shadow-lg shadow-green-500/20 hover:shadow-green-500/40">
              الحصول على إشارات الذكاء الاصطناعي
            </button>
          </div>
          <div id="app-container" class="hidden min-h-screen container mx-auto p-4 md:p-8">
            <div class="w-full flex justify-end items-center mb-4">
              <button id="lotteryBtn" class="shimmer-btn rounded-md px-4 py-2 text-sm ml-4">
                <i class="fas fa-star ml-2"></i>اليانصيب
              </button>
              <button id="logoutBtn" class="bg-red-600 text-white px-4 py-2 text-sm rounded-md hover:bg-red-500 transition-colors active:scale-95">
                <i class="fas fa-sign-out-alt ml-2"></i>تسجيل الخروج
              </button>
            </div>
            <div id="live-feed-section" class="mb-8">
              <h3 class="text-center text-xl mb-4 tracking-widest flex items-center justify-center">
                // طلابي //
                <span class="bg-red-600 text-white text-xs font-bold px-2 py-1 rounded mr-2 animate-pulse">مباشر</span>
              </h3>
              <div id="live-feed-container" class="h-24 bg-black/30 border border-green-800 rounded-md p-2 flex items-center space-x-4 overflow-x-hidden"></div>
            </div>
            <div id="signals-section" class="">
              <h2 class="text-3xl md:text-4xl text-center mb-10 tracking-widest">
                // إشارات الذكاء الاصطناعي //
              </h2>
              <div id="cards-grid" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-5 gap-6">
                <div class="signal-card locked-card bg-[#0d0d0d] border border-yellow-700 rounded-lg overflow-hidden flex flex-col" data-card-type="vip" data-game="vip">
                  <div class="w-full h-48 overflow-hidden relative">
                    <img src="" alt="" class="card-image w-full h-full object-cover transition-all duration-300">
                    <div class="banner-container absolute inset-0 flex items-center justify-center">
                      <div class="absolute w-[150%] bg-red-600 text-white text-center font-bold py-2 rotate-12 text-sm shadow-lg">
                        تحتاج إلى رمز وصول آخر
                      </div>
                    </div>
                  </div>
                  <div class="p-4 flex flex-col flex-grow text-center">
                    <h3 class="card-title text-lg font-bold mb-2 flex-grow text-yellow-300" style="text-shadow: 0 0 8px #f6e05e"></h3>
                    <p id="stats-vip" class="text-sm text-gray-400 mb-3 font-mono leading-tight">
                      // جاري تحميل البيانات... //
                    </p>
                    <button class="w-full mt-auto bg-gray-600 text-gray-400 px-4 py-2 cursor-not-allowed" disabled="">
                      تفعيل
                    </button>
                  </div>
                </div>

                <div class="signal-card bg-[#0d0d0d] border border-green-700 rounded-lg overflow-hidden flex flex-col" data-game="aviator">
                  <img src="" alt="" class="card-image w-full h-48 object-cover">
                  <div class="p-4 flex flex-col flex-grow text-center">
                    <h3 class="card-title text-lg font-bold mb-2 flex-grow"></h3>
                    <p id="stats-aviator" class="text-sm text-gray-400 mb-3 font-mono leading-tight">
                      // جاري تحميل البيانات... //
                    </p>
                    <button class="activate-btn w-full mt-auto bg-green-600 text-black px-4 py-2 hover:bg-green-500 transition-all duration-300 active:scale-95">
                      تفعيل
                    </button>
                  </div>
                </div>

                <div class="signal-card bg-[#0d0d0d] border border-green-700 rounded-lg overflow-hidden flex flex-col" data-game="mines">
                  <img src="" alt="" class="card-image w-full h-48 object-cover">
                  <div class="p-4 flex flex-col flex-grow text-center">
                    <h3 class="card-title text-lg font-bold mb-2 flex-grow"></h3>
                    <p id="stats-mines" class="text-sm text-gray-400 mb-3 font-mono leading-tight">
                      // جاري تحميل البيانات... //
                    </p>
                    <button class="activate-btn w-full mt-auto bg-green-600 text-black px-4 py-2 hover:bg-green-500 transition-all duration-300 active:scale-95">
                      تفعيل
                    </button>
                  </div>
                </div>

                <div class="signal-card bg-[#0d0d0d] border border-green-700 rounded-lg overflow-hidden flex flex-col" data-game="penalty">
                  <img src="" alt="" class="card-image w-full h-48 object-cover">
                  <div class="p-4 flex flex-col flex-grow text-center">
                    <h3 class="card-title text-lg font-bold mb-2 flex-grow"></h3>
                    <p id="stats-penalty" class="text-sm text-gray-400 mb-3 font-mono leading-tight">
                      // جاري تحميل البيانات... //
                    </p>
                    <button class="activate-btn w-full mt-auto bg-green-600 text-black px-4 py-2 hover:bg-green-500 transition-all duration-300 active:scale-95">
                      تفعيل
                    </button>
                  </div>
                </div>

                <div class="signal-card bg-[#0d0d0d] border border-green-700 rounded-lg overflow-hidden flex flex-col" data-game="apple">
                  <img src="" alt="" class="card-image w-full h-48 object-cover">
                  <div class="p-4 flex flex-col flex-grow text-center">
                    <h3 class="card-title text-lg font-bold mb-2 flex-grow"></h3>
                    <p id="stats-apple" class="text-sm text-gray-400 mb-3 font-mono leading-tight">
                      // جاري تحميل البيانات... //
                    </p>
                    <button class="activate-btn w-full mt-auto bg-green-600 text-black px-4 py-2 hover:bg-green-500 transition-all duration-300 active:scale-95">
                      تفعيل
                    </button>
                  </div>
                </div>

                <div class="signal-card bg-[#0d0d0d] border border-green-700 rounded-lg overflow-hidden flex flex-col" data-game="chicken">
                  <img src="" alt="" class="card-image w-full h-48 object-cover">
                  <div class="p-4 flex flex-col flex-grow text-center">
                    <h3 class="card-title text-lg font-bold mb-2 flex-grow"></h3>
                    <p id="stats-chicken" class="text-sm text-gray-400 mb-3 font-mono leading-tight">
                      // جاري تحميل البيانات... //
                    </p>
                    <button class="activate-btn w-full mt-auto bg-green-600 text-black px-4 py-2 hover:bg-green-500 transition-all duration-300 active:scale-95">
                      تفعيل
                    </button>
                  </div>
                </div>
              </div>
            </div>
            <div id="game-view" class="hidden">
              <div id="game-screen-vip" class="game-screen hidden flex-col items-center justify-center">
                <div class="w-full relative min-h-[60vh] flex flex-col items-center justify-center bg-black/30 border border-yellow-500 rounded-md p-8 pt-16 pb-8 text-center">
                  <div class="absolute top-4 right-4">
                    <button class="back-to-signals-btn text-yellow-400 hover:text-yellow-300 transition-colors bg-transparent border border-yellow-400 rounded px-3 py-1 text-sm hover:bg-yellow-400 hover:text-black">
                      رجوع --&gt;
                    </button>
                  </div>
                  <h2 class="game-title text-3xl sm:text-4xl text-yellow-300 mb-6 font-bold" style="text-shadow: 0 0 8px #f6e05e"></h2>
                  <div class="max-w-xl text-lg text-gray-300 space-y-4">
                    <p>تهانينا على حصولك على أندر متنبئ يا صديقي!</p>
                    <p>
                      المتنبئ الذي تلقيته للتو يستخدم أحدث تقنيات الذكاء
                      الاصطناعي لتوقع المراهنات الرياضية!
                    </p>
                    <p>
                      الآن، بفضل الذكاء الاصطناعي، يمكنك التنبؤ بالفائز في
                      الأحداث الرياضية بدقة 99٪!
                    </p>
                    <p>
                      نحن نستخدم أحدث ذكاء اصطناعي، وهو متاح لنا فقط في الوصول
                      الخاص.
                    </p>
                    <p class="font-bold text-green-400">
                      اكتب لي حتى أتمكن من إعطائك التنبؤات باستخدام الذكاء
                      الاصطناعي الخاص بنا!
                    </p>
                  </div>
                  <a id="vip-send-message-link" href="#" class="mt-8 bg-green-600 text-black px-8 py-3 text-lg hover:bg-green-500 transition-all duration-300 active:scale-95 rounded-md font-bold">
                    إرسال رسالة
                  </a>
                </div>
              </div>

              <div id="game-screen-slot" class="game-screen hidden flex-col items-center justify-center">
                <div class="video-tutorial-section w-full p-4">
                  <div class="flex justify-start w-full mb-4">
                    <button class="back-to-signals-btn text-yellow-400 hover:text-yellow-300 transition-colors bg-transparent border border-yellow-400 rounded px-3 py-1 text-sm hover:bg-yellow-400 hover:text-black">
                      رجوع --&gt;
                    </button>
                  </div>
                  <h3 class="text-3xl text-center text-cyan-300 mb-6">
                    أولاً، ابحث عن لعبة "Slot"
                  </h3>
                  <div class="flex flex-col md:flex-row gap-6 justify-center items-start">
                    <div class="w-full md:w-1/2">
                      <h4 class="text-center mb-2 text-lg">
                        كيفية العثور على "SLOTS" في الويب
                      </h4>
                      <div class="aspect-video bg-black border border-cyan-700 rounded-lg overflow-hidden">
                        <iframe class="w-full h-full" id="slot-find-game-web-iframe" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen=""></iframe>
                      </div>
                    </div>
                    <div class="w-full md:w-1/2">
                      <h4 class="text-center mb-2 text-lg">
                        كيفية العثور على "SLOTS" في التطبيق
                      </h4>
                      <div class="aspect-video bg-black border border-cyan-700 rounded-lg overflow-hidden">
                        <iframe class="w-full h-full" id="slot-find-game-app-iframe" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen=""></iframe>
                      </div>
                    </div>
                  </div>
                  <div class="text-center mt-8">
                    <button class="i-found-game-btn bg-green-600 text-black px-8 py-3 text-lg hover:bg-green-500 transition-all duration-300 active:scale-95 rounded-md font-bold">
                      لقد وجدت اللعبة
                    </button>
                  </div>
                </div>

                <div class="predictor-section hidden w-full relative min-h-[60vh] flex-col items-center justify-center bg-black/30 border border-green-800 rounded-md p-4 pt-16 pb-8">
                  <div class="absolute top-4 right-4">
                    <button class="back-to-signals-btn text-yellow-400 hover:text-yellow-300 transition-colors bg-transparent border border-yellow-400 rounded px-3 py-1 text-sm hover:bg-yellow-400 hover:text-black">
                      رجوع --&gt;
                    </button>
                  </div>
                  <h3 class="game-title text-3xl sm:text-4xl text-center mb-4 px-12 sm:px-0 mt-8 sm:mt-0"></h3>
                  <div class="mb-2 py-4 flex-grow flex items-center justify-center">
                    <p id="slot-signal-display" class="text-3xl sm:text-4xl md:text-5xl font-mono text-center text-white transition-colors duration-500 px-4">
                      دور
                      <span id="slot-number" class="slot-number text-yellow-400" style="text-shadow: 0 0 15px rgba(250, 204, 21, 0.7)">#</span>
                      مرات
                    </p>
                  </div>

                  <p id="slot-bet-suggestion" class="bet-suggestion-text text-center text-yellow-400 h-8 my-6 text-sm sm:text-xl font-bold px-2"></p>

                  <div id="slot-actions-initial" class="slot-actions-initial flex flex-col sm:flex-row space-y-4 sm:space-y-0 sm:space-x-4 w-full max-w-md">
                    <button id="slot-get-bet-btn" class="slot-get-bet-btn flex-1 bg-green-600 text-black px-4 py-2 text-base hover:bg-green-500 transition-all duration-300 active:scale-95 rounded-md">
                      الحصول على حجم الرهان
                    </button>
                    <button id="slot-get-signal-btn" class="slot-get-signal-btn flex-1 px-4 py-2 text-base transition-all duration-300 active:scale-95 rounded-md btn-disabled" disabled="">
                      الحصول على إشارة
                    </button>
                  </div>

                  <button id="slot-get-another-btn" class="slot-get-another-btn hidden w-full max-w-md bg-yellow-500 text-black px-4 py-2 text-base hover:bg-yellow-400 transition-all duration-300 active:scale-95 rounded-md">
                    الحصول على إشارة أخرى
                  </button>

                  <div id="slot-console" class="game-console w-full max-w-md border rounded-md mt-6 p-2 font-mono text-xs overflow-y-auto">
                    <div></div>
                  </div>
                </div>
              </div>

              <div id="game-screen-aviator" class="game-screen hidden flex-col items-center justify-center">
                <div class="video-tutorial-section w-full p-4">
                  <div class="flex justify-start w-full mb-4">
                    <button class="back-to-signals-btn text-yellow-400 hover:text-yellow-300 transition-colors bg-transparent border border-yellow-400 rounded px-3 py-1 text-sm hover:bg-yellow-400 hover:text-black">
                      رجوع --&gt;
                    </button>
                  </div>
                  <h3 class="text-3xl text-center text-cyan-300 mb-6">
                    أولاً، ابحث عن لعبة "Aviator"
                  </h3>
                  <div class="flex flex-col md:flex-row gap-6 justify-center items-start">
                    <div class="w-full md:w-1/2">
                      <h4 class="text-center mb-2 text-lg">
                        كيفية العثور على "AVIATOR" في الويب
                      </h4>
                      <div class="aspect-video bg-black border border-cyan-700 rounded-lg overflow-hidden">
                        <iframe class="w-full h-full" id="aviator-find-game-web-iframe" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen=""></iframe>
                      </div>
                    </div>
                    <div class="w-full md:w-1/2">
                      <h4 class="text-center mb-2 text-lg">
                        كيفية العثور على "AVIATOR" في التطبيق
                      </h4>
                      <div class="aspect-video bg-black border border-cyan-700 rounded-lg overflow-hidden">
                        <iframe class="w-full h-full" id="aviator-find-game-app-iframe" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen=""></iframe>
                      </div>
                    </div>
                  </div>
                  <div class="text-center mt-8">
                    <button class="i-found-game-btn bg-green-600 text-black px-8 py-3 text-lg hover:bg-green-500 transition-all duration-300 active:scale-95 rounded-md font-bold">
                      لقد وجدت اللعبة
                    </button>
                  </div>
                </div>
                <div class="predictor-section hidden w-full relative min-h-[60vh] flex flex-col items-center justify-center bg-black/30 border border-green-800 rounded-md p-4 pt-16 pb-8">
                  <div class="absolute top-4 right-4">
                    <button class="back-to-signals-btn text-yellow-400 hover:text-yellow-300 transition-colors bg-transparent border border-yellow-400 rounded px-3 py-1 text-sm hover:bg-yellow-400 hover:text-black">
                      رجوع --&gt;
                    </button>
                  </div>
                  <div class="absolute top-4 left-4 flex flex-col sm:flex-row gap-2">
                    <button class="open-video-btn text-orange-400 hover:text-orange-300 bg-transparent border border-orange-400 rounded px-4 py-2 text-base hover:bg-orange-400 hover:text-black font-bold transition-all active:scale-95" data-videos-key="howToUse" data-game-key="aviator">
                      كيفية استخدام المتنبئ
                    </button>
                  </div>
                  <h3 class="game-title text-3xl sm:text-4xl text-center mb-4 px-12 sm:px-0 mt-8 sm:mt-0"></h3>
                  <div class="mb-2 py-4">
                    <p id="aviator-multiplier" class="text-7xl md:text-9xl font-mono text-center text-white transition-colors duration-500">
                      x1.00
                    </p>
                  </div>
                  <p id="aviator-bet-suggestion" class="bet-suggestion-text text-center text-yellow-400 h-8 my-6 text-sm sm:text-xl font-bold px-2"></p>
                  <div id="aviator-actions-initial" class="flex flex-col sm:flex-row space-y-4 sm:space-y-0 sm:space-x-4 w-full max-w-md">
                    <button id="aviator-get-bet-btn" class="flex-1 bg-green-600 text-black px-4 py-2 text-base hover:bg-green-500 transition-all duration-300 active:scale-95 rounded-md">
                      الحصول على حجم الرهان
                    </button>
                    <button id="aviator-get-signal-btn" class="flex-1 px-4 py-2 text-base transition-all duration-300 active:scale-95 rounded-md btn-disabled" disabled="">
                      الحصول على إشارة
                    </button>
                  </div>
                  <button id="aviator-get-another-btn" class="hidden w-full max-w-md bg-yellow-500 text-black px-4 py-2 text-base hover:bg-yellow-400 transition-all duration-300 active:scale-95 rounded-md">
                    الحصول على إشارة أخرى
                  </button>
                  <div id="aviator-console" class="game-console w-full max-w-md border rounded-md mt-6 p-2 font-mono text-xs overflow-y-auto">
                    <div></div>
                  </div>
                </div>
              </div>

              <div id="game-screen-mines" class="game-screen hidden flex-col items-center justify-center">
                <div class="video-tutorial-section w-full p-4">
                  <div class="flex justify-start w-full mb-4">
                    <button class="back-to-signals-btn text-yellow-400 hover:text-yellow-300 transition-colors bg-transparent border border-yellow-400 rounded px-3 py-1 text-sm hover:bg-yellow-400 hover:text-black">
                      رجوع --&gt;
                    </button>
                  </div>
                  <h3 class="text-3xl text-center text-cyan-300 mb-6">
                    أولاً، ابحث عن لعبة "Mines"
                  </h3>
                  <div class="flex flex-col md:flex-row gap-6 justify-center items-start">
                    <div class="w-full md:w-1/2">
                      <h4 class="text-center mb-2 text-lg">
                        كيفية العثور على "MINES" في الويب
                      </h4>
                      <div class="aspect-video bg-black border border-cyan-700 rounded-lg overflow-hidden">
                        <iframe class="w-full h-full" id="mines-find-game-web-iframe" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen=""></iframe>
                      </div>
                    </div>
                    <div class="w-full md:w-1/2">
                      <h4 class="text-center mb-2 text-lg">
                        كيفية العثور على "MINES" في التطبيق
                      </h4>
                      <div class="aspect-video bg-black border border-cyan-700 rounded-lg overflow-hidden">
                        <iframe class="w-full h-full" id="mines-find-game-app-iframe" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen=""></iframe>
                      </div>
                    </div>
                  </div>
                  <div class="text-center mt-8">
                    <button class="i-found-game-btn bg-green-600 text-black px-8 py-3 text-lg hover:bg-green-500 transition-all duration-300 active:scale-95 rounded-md font-bold">
                      لقد وجدت اللعبة
                    </button>
                  </div>
                </div>
                <div class="predictor-section hidden w-full relative min-h-[60vh] flex flex-col items-center justify-center bg-black/30 border border-green-800 rounded-md p-4 pt-16 pb-8">
                  <button class="back-to-signals-btn absolute top-4 right-4 text-yellow-400 hover:text-yellow-300 transition-colors bg-transparent border border-yellow-400 rounded px-3 py-1 text-sm hover:bg-yellow-400 hover:text-black">
                    رجوع --&gt;
                  </button>
                  <div class="absolute top-4 left-4 flex flex-col sm:flex-row gap-2">
                    <button class="open-video-btn text-orange-400 hover:text-orange-300 bg-transparent border border-orange-400 rounded px-4 py-2 text-base hover:bg-orange-400 hover:text-black font-bold transition-all active:scale-95" data-videos-key="howToUse" data-game-key="mines">
                      كيفية استخدام المتنبئ
                    </button>
                  </div>
                  <h3 class="game-title text-3xl sm:text-4xl text-center mb-6 px-12 sm:px-0 mt-8 sm:mt-0"></h3>
                  <div class="flex flex-col sm:flex-row gap-6 mb-6 w-full max-w-lg">
                    <div class="relative flex-1" data-select-id="grid-size">
                      <label class="block text-sm text-gray-400 mb-1">حجم الشبكة</label>
                      <button class="custom-select-trigger w-full bg-gray-900 border border-green-700 rounded p-3 flex justify-between items-center">
                        <span class="selected-option">5x5</span><i class="fas fa-chevron-down text-xs"></i>
                      </button>
                      <div class="custom-select-options hidden absolute top-full left-0 right-0 mt-1 bg-gray-900 border border-green-700 rounded-md z-10 overflow-hidden">
                        <div class="p-2 cursor-pointer hover:bg-green-800/50">
                          3x3
                        </div>
                        <div class="p-2 cursor-pointer hover:bg-green-800/50">
                          4x4
                        </div>
                        <div class="p-2 cursor-pointer hover:bg-green-800/50">
                          5x5
                        </div>
                        <div class="p-2 cursor-pointer hover:bg-green-800/50">
                          6x6
                        </div>
                        <div class="p-2 cursor-pointer hover:bg-green-800/50">
                          7x7
                        </div>
                      </div>
                    </div>
                    <div class="relative flex-1" data-select-id="mine-count">
                      <label class="block text-sm text-gray-400 mb-1">عدد الألغام</label>
                      <button class="custom-select-trigger w-full bg-gray-900 border border-green-700 rounded p-3 flex justify-between items-center">
                        <span class="selected-option">3</span><i class="fas fa-chevron-down text-xs"></i>
                      </button>
                      <div class="custom-select-options hidden absolute top-full left-0 right-0 mt-1 bg-gray-900 border border-green-700 rounded-md z-10 overflow-y-auto max-h-48">
                        <div class="p-2 cursor-pointer hover:bg-green-800/50">
                          1
                        </div>
                        <div class="p-2 cursor-pointer hover:bg-green-800/50">
                          2
                        </div>
                        <div class="p-2 cursor-pointer hover:bg-green-800/50">
                          3
                        </div>
                        <div class="p-2 cursor-pointer hover:bg-green-800/50">
                          4
                        </div>
                        <div class="p-2 cursor-pointer hover:bg-green-800/50">
                          5
                        </div>
                        <div class="p-2 cursor-pointer hover:bg-green-800/50">
                          6
                        </div>
                        <div class="p-2 cursor-pointer hover:bg-green-800/50">
                          7
                        </div>
                        <div class="p-2 cursor-pointer hover:bg-green-800/50">
                          10
                        </div>
                        <div class="p-2 cursor-pointer hover:bg-green-800/50">
                          15
                        </div>
                      </div>
                    </div>
                  </div>
                  <div id="mines-grid-container" class="w-full max-w-md aspect-square mb-6"></div>
                  <p id="mines-bet-suggestion" class="bet-suggestion-text text-center text-yellow-400 h-8 my-6 text-sm sm:text-xl font-bold p-2"></p>
                  <div id="mines-actions-initial" class="flex flex-col sm:flex-row space-y-4 sm:space-y-0 sm:space-x-4 w-full max-w-md">
                    <button id="mines-get-bet-btn" class="flex-1 bg-green-600 text-black px-4 py-2 text-base hover:bg-green-500 transition-all duration-300 active:scale-95 rounded-md">
                      الحصول على حجم الرهان
                    </button>
                    <button id="mines-get-signal-btn" class="flex-1 px-4 py-2 text-base transition-all duration-300 active:scale-95 rounded-md btn-disabled" disabled="">
                      الحصول على إشارة
                    </button>
                  </div>
                  <button id="mines-get-another-btn" class="hidden w-full max-w-md bg-yellow-500 text-black px-4 py-2 text-base hover:bg-yellow-400 transition-all duration-300 active:scale-95 rounded-md">
                    الحصول على إشارة أخرى
                  </button>
                  <div id="mines-console" class="game-console w-full max-w-md border rounded-md mt-6 p-2 font-mono text-xs overflow-y-auto">
                    <div></div>
                  </div>
                </div>
              </div>

              <div id="game-screen-penalty" class="game-screen hidden flex-col items-center justify-center">
                <div class="video-tutorial-section w-full p-4">
                  <div class="flex justify-start w-full mb-4">
                    <button class="back-to-signals-btn text-yellow-400 hover:text-yellow-300 transition-colors bg-transparent border border-yellow-400 rounded px-3 py-1 text-sm hover:bg-yellow-400 hover:text-black">
                      رجوع --&gt;
                    </button>
                  </div>
                  <h3 class="text-3xl text-center text-cyan-300 mb-6">
                    أولاً، ابحث عن لعبة "Penalty"
                  </h3>
                  <div class="flex flex-col md:flex-row gap-6 justify-center items-start">
                    <div class="w-full md:w-1/2">
                      <h4 class="text-center mb-2 text-lg">
                        كيفية العثور على "PENALTY" في الويب
                      </h4>
                      <div class="aspect-video bg-black border border-cyan-700 rounded-lg overflow-hidden">
                        <iframe class="w-full h-full" id="penalty-find-game-web-iframe" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen=""></iframe>
                      </div>
                    </div>
                    <div class="w-full md:w-1/2">
                      <h4 class="text-center mb-2 text-lg">
                        كيفية العثور على "PENALTY" في التطبيق
                      </h4>
                      <div class="aspect-video bg-black border border-cyan-700 rounded-lg overflow-hidden">
                        <iframe class="w-full h-full" id="penalty-find-game-app-iframe" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen=""></iframe>
                      </div>
                    </div>
                  </div>
                  <div class="text-center mt-8">
                    <button class="i-found-game-btn bg-green-600 text-black px-8 py-3 text-lg hover:bg-green-500 transition-all duration-300 active:scale-95 rounded-md font-bold">
                      لقد وجدت اللعبة
                    </button>
                  </div>
                </div>
                <div class="predictor-section hidden w-full relative min-h-[60vh] flex flex-col items-center justify-center bg-black/30 border border-green-800 rounded-md p-4 pt-16 pb-8">
                  <button class="back-to-signals-btn absolute top-4 right-4 text-yellow-400 hover:text-yellow-300 transition-colors bg-transparent border border-yellow-400 rounded px-3 py-1 text-sm hover:bg-yellow-400 hover:text-black">
                    رجوع --&gt;
                  </button>
                  <div class="absolute top-4 left-4 flex flex-col sm:flex-row gap-2">
                    <button class="open-video-btn text-orange-400 hover:text-orange-300 bg-transparent border border-orange-400 rounded px-4 py-2 text-base hover:bg-orange-400 hover:text-black font-bold transition-all active:scale-95" data-videos-key="howToUse" data-game-key="penalty">
                      كيفية استخدام المتنبئ
                    </button>
                  </div>
                  <h3 class="game-title text-3xl sm:text-4xl text-center mb-6 px-12 sm:px-0 mt-8 sm:mt-0"></h3>
                  <div class="relative w-full max-w-lg h-64 md:h-80 bg-gray-900/20 border-2 border-gray-600 mb-6">
                    <div class="penalty-gate-post absolute left-0 top-0 w-2 h-full"></div>
                    <div class="penalty-gate-post absolute right-0 top-0 w-2 h-full"></div>
                    <div class="penalty-gate-post absolute left-0 top-0 w-full h-2"></div>
                    <div data-zone="1" class="penalty-target-zone absolute top-4 left-4 w-16 h-16 md:w-20 md:h-20 rounded-full"></div>
                    <div data-zone="2" class="penalty-target-zone absolute top-4 right-4 w-16 h-16 md:w-20 md:h-20 rounded-full"></div>
                    <div data-zone="3" class="penalty-target-zone absolute top-4 left-1/2 -translate-x-1/2 w-16 h-16 md:w-20 md:h-20 rounded-full"></div>
                    <div data-zone="4" class="penalty-target-zone absolute bottom-4 left-4 w-16 h-16 md:w-20 md:h-20 rounded-full"></div>
                    <div data-zone="5" class="penalty-target-zone absolute bottom-4 right-4 w-16 h-16 md:w-20 md:h-20 rounded-full"></div>
                  </div>
                  <p id="penalty-bet-suggestion" class="bet-suggestion-text text-center text-yellow-400 h-8 my-6 text-sm sm:text-xl font-bold px-2"></p>
                  <div id="penalty-actions-initial" class="flex flex-col sm:flex-row space-y-4 sm:space-y-0 sm:space-x-4 w-full max-w-md">
                    <button id="penalty-get-bet-btn" class="flex-1 bg-green-600 text-black px-4 py-2 text-base hover:bg-green-500 transition-all duration-300 active:scale-95 rounded-md">
                      الحصول على حجم الرهان
                    </button>
                    <button id="penalty-get-signal-btn" class="flex-1 px-4 py-2 text-base transition-all duration-300 active:scale-95 rounded-md btn-disabled" disabled="">
                      الحصول على إشارة
                    </button>
                  </div>
                  <button id="penalty-start-new-game-btn" class="hidden w-full max-w-md bg-yellow-500 text-black px-6 py-3 text-lg hover:bg-yellow-400 transition-all duration-300 active:scale-95 rounded-md mt-4">
                    بدء لعبة جديدة
                  </button>
                  <div id="penalty-console" class="game-console w-full max-w-md border rounded-md mt-6 p-2 font-mono text-xs overflow-y-auto">
                    <div></div>
                  </div>
                </div>
              </div>

              <div id="game-screen-apple" class="game-screen hidden flex-col items-center justify-center">
                <div class="video-tutorial-section w-full p-4">
                  <div class="flex justify-start w-full mb-4">
                    <button class="back-to-signals-btn text-yellow-400 hover:text-yellow-300 transition-colors bg-transparent border border-yellow-400 rounded px-3 py-1 text-sm hover:bg-yellow-400 hover:text-black">
                      رجوع --&gt;
                    </button>
                  </div>
                  <h3 class="text-3xl text-center text-cyan-300 mb-6">
                    أولاً، ابحث عن لعبة "Apple of Fortune"
                  </h3>
                  <div class="flex flex-col md:flex-row gap-6 justify-center items-start">
                    <div class="w-full md:w-1/2">
                      <h4 class="text-center mb-2 text-lg">
                        كيفية العثور على "APPLE OF FORTUNE" في الويب
                      </h4>
                      <div class="aspect-video bg-black border border-cyan-700 rounded-lg overflow-hidden">
                        <iframe class="w-full h-full" id="apple-find-game-web-iframe" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen=""></iframe>
                      </div>
                    </div>
                    <div class="w-full md:w-1/2">
                      <h4 class="text-center mb-2 text-lg">
                        كيفية العثور على "APPLE OF FORTUNE" في التطبيق
                      </h4>
                      <div class="aspect-video bg-black border border-cyan-700 rounded-lg overflow-hidden">
                        <iframe class="w-full h-full" id="apple-find-game-app-iframe" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen=""></iframe>
                      </div>
                    </div>
                  </div>
                  <div class="text-center mt-8">
                    <button class="i-found-game-btn bg-green-600 text-black px-8 py-3 text-lg hover:bg-green-500 transition-all duration-300 active:scale-95 rounded-md font-bold">
                      لقد وجدت اللعبة
                    </button>
                  </div>
                </div>
                <div class="predictor-section hidden w-full relative min-h-[60vh] flex flex-col items-center justify-center bg-black/30 border border-green-800 rounded-md p-4 pt-16 pb-8">
                  <button class="back-to-signals-btn absolute top-4 right-4 text-yellow-400 hover:text-yellow-300 transition-colors bg-transparent border border-yellow-400 rounded px-3 py-1 text-sm hover:bg-yellow-400 hover:text-black">
                    رجوع --&gt;
                  </button>
                  <div class="absolute top-4 left-4 flex flex-col sm:flex-row gap-2">
                    <button class="open-video-btn text-orange-400 hover:text-orange-300 bg-transparent border border-orange-400 rounded px-4 py-2 text-base hover:bg-orange-400 hover:text-black font-bold transition-all active:scale-95" data-videos-key="howToUse" data-game-key="apple">
                      كيفية استخدام المتنبئ
                    </button>
                  </div>
                  <h3 class="game-title text-3xl sm:text-4xl text-center mb-4 px-12 sm:px-0 mt-8 sm:mt-0"></h3>
                  <div class="flex-grow flex items-center justify-center">
                    <p id="apple-signal-display" class="text-9xl font-mono text-center text-white">
                      #
                    </p>
                  </div>
                  <p id="apple-bet-suggestion" class="bet-suggestion-text text-center text-yellow-400 h-8 my-6 text-sm sm:text-xl font-bold px-2"></p>
                  <div id="apple-actions-initial" class="flex flex-col sm:flex-row space-y-4 sm:space-y-0 sm:space-x-4 w-full max-w-md">
                    <button id="apple-get-bet-btn" class="flex-1 bg-green-600 text-black px-4 py-2 text-base hover:bg-green-500 transition-all duration-300 active:scale-95 rounded-md">
                      الحصول على حجم الرهان
                    </button>
                    <button id="apple-get-signal-btn" class="flex-1 px-4 py-2 text-base transition-all duration-300 active:scale-95 rounded-md btn-disabled" disabled="">
                      الحصول على إشارة
                    </button>
                  </div>
                  <button id="apple-start-new-game-btn" class="hidden w-full max-w-md bg-yellow-500 text-black px-6 py-3 text-lg hover:bg-yellow-400 transition-all duration-300 active:scale-95 rounded-md mt-4">
                    بدء لعبة جديدة
                  </button>
                  <div id="apple-console" class="game-console w-full max-w-md border rounded-md mt-6 p-2 font-mono text-xs overflow-y-auto">
                    <div></div>
                  </div>
                </div>
              </div>

              <div id="game-screen-chicken" class="game-screen hidden flex-col items-center justify-center">
                <div class="video-tutorial-section w-full p-4">
                  <div class="flex justify-start w-full mb-4">
                    <button class="back-to-signals-btn text-yellow-400 hover:text-yellow-300 transition-colors bg-transparent border border-yellow-400 rounded px-3 py-1 text-sm hover:bg-yellow-400 hover:text-black">
                      رجوع --&gt;
                    </button>
                  </div>
                  <h3 class="text-3xl text-center text-cyan-300 mb-6">
                    أولاً، ابحث عن لعبة "Chicken Road"
                  </h3>
                  <div class="flex flex-col md:flex-row gap-6 justify-center items-start">
                    <div class="w-full md:w-1/2">
                      <h4 class="text-center mb-2 text-lg">
                        كيفية العثور على "CHICKEN ROAD" في الويب
                      </h4>
                      <div class="aspect-video bg-black border border-cyan-700 rounded-lg overflow-hidden">
                        <iframe class="w-full h-full" id="chicken-find-game-web-iframe" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen=""></iframe>
                      </div>
                    </div>
                    <div class="w-full md:w-1/2">
                      <h4 class="text-center mb-2 text-lg">
                        كيفية العثور على "CHICKEN ROAD" في التطبيق
                      </h4>
                      <div class="aspect-video bg-black border border-cyan-700 rounded-lg overflow-hidden">
                        <iframe class="w-full h-full" id="chicken-find-game-app-iframe" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen=""></iframe>
                      </div>
                    </div>
                  </div>
                  <div class="text-center mt-8">
                    <button class="i-found-game-btn bg-green-600 text-black px-8 py-3 text-lg hover:bg-green-500 transition-all duration-300 active:scale-95 rounded-md font-bold">
                      لقد وجدت اللعبة
                    </button>
                  </div>
                </div>
                <div class="predictor-section hidden w-full relative min-h-[60vh] flex flex-col items-center justify-center bg-black/30 border border-green-800 rounded-md p-4 pt-16 pb-8">
                  <button class="back-to-signals-btn absolute top-4 right-4 text-yellow-400 hover:text-yellow-300 transition-colors bg-transparent border border-yellow-400 rounded px-3 py-1 text-sm hover:bg-yellow-400 hover:text-black">
                    رجوع --&gt;
                  </button>
                  <div class="absolute top-4 left-4 flex flex-col sm:flex-row gap-2">
                    <button class="open-video-btn text-orange-400 hover:text-orange-300 bg-transparent border border-orange-400 rounded px-4 py-2 text-base hover:bg-orange-400 hover:text-black font-bold transition-all active:scale-95" data-videos-key="howToUse" data-game-key="chicken">
                      كيفية استخدام المتنبئ
                    </button>
                  </div>
                  <h3 class="game-title text-3xl sm:text-4xl text-center mb-4 px-12 sm:px-0 mt-8 sm:mt-0"></h3>
                  <div class="w-full flex justify-center mb-4">
                    <div class="relative w-full max-w-xs" data-select-id="chicken-difficulty">
                      <label class="block text-sm text-gray-400 mb-1 text-center">الصعوبة</label>
                      <button class="custom-select-trigger w-full bg-gray-900 border border-green-700 rounded p-3 flex justify-between items-center">
                        <span class="selected-option">سهل</span><i class="fas fa-chevron-down text-xs"></i>
                      </button>
                      <div class="custom-select-options hidden absolute top-full left-0 right-0 mt-1 bg-gray-900 border border-green-700 rounded-md z-10 overflow-hidden">
                        <div class="p-2 cursor-pointer hover:bg-green-800/50">
                          سهل
                        </div>
                        <div class="p-2 cursor-pointer hover:bg-green-800/50">
                          متوسط
                        </div>
                        <div class="p-2 cursor-pointer hover:bg-green-800/50">
                          صعب
                        </div>
                        <div class="p-2 cursor-pointer hover:bg-green-800/50">
                          صعب جداً
                        </div>
                      </div>
                    </div>
                  </div>
                  <div id="chicken-road-viewport" class="w-full h-24 relative rounded-md border-y-4 border-gray-500">
                    <div id="chicken-road-track" class="h-full relative flex items-center"></div>
                    <img id="chicken-icon" src="https://iili.io/FvIoXhg.webp" class="absolute h-16 w-16 top-1/2" alt="Chicken">
                  </div>
                  <p id="chicken-bet-suggestion" class="bet-suggestion-text text-center text-yellow-400 h-8 my-6 text-sm sm:text-xl font-bold px-2"></p>
                  <div id="chicken-actions-initial" class="flex flex-col sm:flex-row space-y-4 sm:space-y-0 sm:space-x-4 w-full max-w-md">
                    <button id="chicken-get-bet-btn" class="flex-1 bg-green-600 text-black px-4 py-2 text-base hover:bg-green-500 transition-all duration-300 active:scale-95 rounded-md">
                      الحصول على حجم الرهان
                    </button>
                    <button id="chicken-get-signal-btn" class="flex-1 px-4 py-2 text-base transition-all duration-300 active:scale-95 rounded-md btn-disabled" disabled="">
                      الحصول على إشارة
                    </button>
                  </div>
                  <button id="chicken-get-another-btn" class="hidden w-full max-w-md bg-yellow-500 text-black px-4 py-2 text-base hover:bg-yellow-400 transition-all duration-300 active:scale-95 rounded-md">
                    الحصول على إشارة أخرى
                  </button>
                  <div id="chicken-console" class="game-console w-full max-w-md border rounded-md mt-6 p-2 font-mono text-xs overflow-y-auto">
                    <div></div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div id="accessModal" class="fixed inset-0 bg-black bg-opacity-80 backdrop-blur-sm flex items-center justify-center p-4 hidden">
            <div id="modalContainer" class="bg-[#0d0d0d] border border-green-500 rounded-lg p-6 md:p-8 w-full max-w-sm relative shadow-2xl shadow-green-500/30">
              <button id="closeModalBtn" class="absolute top-2 left-3 text-gray-500 hover:text-green-400 text-3xl transition-colors">
                ×
              </button>
              <div id="formContent" class="text-center">
                <p class="blinking-red text-sm mb-4">
                  // 3 رموز وصول متاحة لهذا اليوم
                </p>
                <label for="accessCode" class="block text-xl mb-4">اكتب رمز الوصول</label><input type="text" id="accessCode" name="accessCode" class="hacker-input w-full bg-gray-900 border border-green-600 text-green-300 rounded p-3 text-center focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all" placeholder="رمز الوصول">
                <p id="errorMessage" class="text-red-500 h-5 mt-2 text-sm"></p>
                <button id="validateBtn" class="mt-4 w-full bg-green-600 text-black px-6 py-2 text-lg hover:bg-green-500 transition-all duration-300 active:scale-95">
                  تحقق
                </button>
              </div>
              <div id="statusContent" class="text-center hidden h-36 flex items-center justify-center">
                <p id="statusText" class="text-2xl animate-pulse"></p>
              </div>
            </div>
          </div>
          <div id="videoModal" class="fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center p-4 hidden z-50">
            <div id="videoModalContainer" class="bg-[#0d0d0d] border border-green-500 rounded-lg w-full max-w-2xl relative shadow-2xl shadow-green-500/30">
              <button id="closeVideoModalBtn" class="absolute -top-3 -left-3 text-black bg-white rounded-full h-8 w-8 flex items-center justify-center hover:bg-gray-200 text-2xl transition-colors z-10">
                ×
              </button>
              <h3 id="videoModalTitle" class="text-white text-xl p-4 text-center"></h3>
              <div class="aspect-video">
                <iframe id="youtube-player" class="w-full h-full" src="" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen=""></iframe>
              </div>
              <div id="video-navigation" class="p-2 flex justify-center items-center gap-4">
                <button id="nextVideoBtn" class="text-white disabled:text-gray-600">
                  <i class="fas fa-arrow-right"></i>
                </button>
                <span id="video-counter" class="text-sm text-gray-400"></span>
                <button id="prevVideoBtn" class="text-white disabled:text-gray-600">
                  <i class="fas fa-arrow-left"></i>
                </button>
              </div>
            </div>
          </div>

          <div id="promoModal" class="fixed inset-0 bg-black bg-opacity-80 backdrop-blur-sm flex items-center justify-center p-4 hidden z-[80]">
            <div class="bg-[#0d0d0d] border border-yellow-500 rounded-lg p-6 w-full max-w-lg relative shadow-2xl shadow-yellow-500/30 text-center">
              <button id="closePromoModalBtn" class="absolute top-2 left-3 text-gray-500 hover:text-yellow-400 text-3xl transition-colors">
                ×
              </button>
              <h2 class="text-2xl text-yellow-300 mb-4 font-bold">عرض رائع!</h2>
              <p class="text-gray-300 mb-6">
                لدينا عرض رائع على شكل عجلة الحظ! يمكنك الفوز بجوائز نقدية
                لبطاقتك، ووصول خاص، ومكافآت، إلخ! لتلقي الرموز الخاصة، اكتب كلمة
                "WHEEL999" لي للحصول على تعليمات حول كيفية الحصول على رمز خاص!
              </p>
              <button id="openLotteryFromPromoBtn" class="shimmer-btn rounded-md px-8 py-3 text-lg">
                <i class="fas fa-star ml-2"></i>الذهاب إلى عجلة الحظ
              </button>
            </div>
          </div>

          <div id="lotteryModal" class="fixed inset-0 bg-black bg-opacity-80 backdrop-blur-sm flex items-center justify-center p-4 hidden z-[60]">
            <div class="bg-[#0d0d0d] border border-yellow-500 rounded-lg p-4 sm:p-6 md:p-8 w-full max-w-md sm:max-w-lg md:max-w-xl relative shadow-2xl shadow-yellow-500/30 text-center overflow-hidden">
              <canvas id="confettiCanvas" class="absolute top-0 left-0 w-full h-full pointer-events-none z-20"></canvas>
              <button id="closeLotteryModalBtn" class="absolute top-2 left-3 text-gray-500 hover:text-yellow-400 text-3xl transition-colors z-10">
                ×
              </button>
              <h2 class="text-3xl text-yellow-300 mb-4 font-bold" style="text-shadow: 0 0 8px #f6e05e">
                عجلة الحظ
              </h2>
              <div id="wheel-container" class="relative w-full max-w-[300px] sm:max-w-[400px] md:max-w-[450px] aspect-square mx-auto my-4 flex items-center justify-center">
                <div id="wheel-pointer" class="absolute"></div>
                <canvas id="wheelCanvas"></canvas>
              </div>
              <div id="lottery-controls" class="flex flex-col items-center">
                <label for="lotteryCode" class="block text-lg mb-2 text-gray-300">أدخل الرمز الخاص بك</label>
                <input type="text" id="lotteryCode" class="hacker-input w-full max-w-xs mx-auto bg-gray-900 border border-yellow-600 text-yellow-300 rounded p-3 text-center focus:outline-none focus:ring-2 focus:ring-yellow-500 focus:border-transparent transition-all">
                <p id="lotteryErrorMessage" class="text-red-500 h-5 mt-2 text-sm"></p>
                <div class="mt-4 w-full max-w-xs mx-auto flex gap-2">
                  <button id="spinBtn" class="flex-grow bg-yellow-500 text-black px-6 py-3 text-lg hover:bg-yellow-400 transition-all duration-300 active:scale-95 rounded-md font-bold disabled:bg-gray-600 disabled:cursor-not-allowed">
                    أدر العجلة
                  </button>
                  <button id="infoBtn" class="bg-blue-600 text-white px-5 py-3 text-lg hover:bg-blue-500 transition-all duration-300 active:scale-95 rounded-md font-bold">
                    <i class="fas fa-info"></i>
                  </button>
                </div>
              </div>
              <div id="lottery-result" class="hidden min-h-[148px] flex flex-col items-center justify-center">
                <p class="text-lg text-gray-400">تهانينا! لقد فزت بـ:</p>
                <p id="lotteryResultText" class="text-2xl sm:text-3xl text-yellow-300 font-bold mt-2"></p>
                <p class="text-lg mt-2 blinking-text font-bold">
                  اكتب لي ما فزت به للحصول عليه
                </p>
                <button id="spinAgainBtn" class="mt-4 w-full max-w-xs mx-auto bg-gray-700 text-yellow-300 px-6 py-2 text-base hover:bg-gray-600 transition-all duration-300 active:scale-95 rounded-md font-bold">
                  أدر مرة أخرى
                </button>
              </div>
            </div>
          </div>

          <div id="infoModal" class="fixed inset-0 bg-black bg-opacity-80 backdrop-blur-sm flex items-center justify-center p-4 hidden z-[70]">
            <div class="bg-[#0d0d0d] border border-blue-500 rounded-lg p-6 w-full max-w-lg relative shadow-2xl shadow-blue-500/30">
              <button id="closeInfoModalBtn" class="absolute top-2 left-3 text-gray-500 hover:text-blue-400 text-3xl transition-colors">
                ×
              </button>
              <h2 class="text-2xl text-blue-300 mb-6 font-bold text-center">
                معلومات الجائزة
              </h2>

              <h3 class="text-lg text-white font-bold mb-2">
                معدلات إسقاط الجوائز:
              </h3>
              <ol class="list-decimal list-inside text-gray-300 space-y-1" dir="rtl">
                <li>إشارات خاصة من مدير الموقع: بنسبة 5%</li>
                <li>مبلغ 100 دولار إلى بطاقتك: بنسبة 5%</li>
                <li>وصول إلى قسم توقعات VIP: بنسبة 15%</li>
                <li>وصول إلى قسم توقعات السلوتس: بنسبة 15%</li>
                <li>مكافأة على الإيداع بنسبة ‎100%: بنسبة 20%</li>
                <li>مكافأة على الإيداع بنسبة ‎50%: بنسبة 20%</li>
                <li>لا شيء: بنسبة 20%</li>
              </ol>

              <h3 class="text-lg text-white font-bold mt-6 mb-2">
                كيف تحصل على "رمز خاص"؟
              </h3>
              <p class="text-gray-300">
                لتلقي رموز جديدة لـ WHEEL OF FORTUNE، تحتاج إلى كتابة "WHEEL999"
                في الدردشة معي والحصول على تعليمات حول كيفية كسب رمز جديد.
              </p>
              <p class="text-gray-400 text-sm mt-1">
                يمكن استخدام الرمز مرة واحدة فقط.
              </p>

              <h3 class="text-lg text-white font-bold mt-6 mb-2">
                كيف تطالب بجائزتك؟
              </h3>
              <p class="text-gray-300">
                للمطالبة بجائزتك، يجب أن تكتب لي وترسل لقطة شاشة لما فزت به. لا
                تحاول الغش، فأنا أتحقق من كل شيء في النظام والسجلات.
              </p>
            </div>
          </div>

          <div id="chat-overlay" class="fixed inset-0 bg-black/60 z-40 hidden"></div>
          <div class="fixed bottom-5 left-5 z-50">
            <button id="chat-toggle-btn" class="w-16 h-16 bg-green-500 rounded-full flex items-center justify-center text-black shadow-lg shadow-green-500/50 hover:scale-110 transition-transform">
              <i class="fas fa-comments text-3xl"></i>
            </button>
            <div id="chat-widget" class="hidden absolute bottom-20 left-0 w-80 sm:w-96 h-[500px] bg-black/80 backdrop-blur-md border-2 border-green-600 rounded-lg flex flex-col">
              <div class="p-3 flex justify-between items-center border-b border-green-800">
                <h3 class="text-lg">// دردشة مباشرة //</h3>
                <button id="chat-close-btn" class="text-gray-400 hover:text-green-400">
                  <i class="fas fa-times"></i>
                </button>
              </div>
              <div id="chat-messages" class="flex-1 p-3 overflow-y-auto space-y-3"></div>
              <div class="p-3 border-t border-green-800">
                <div class="flex space-x-2">
                  <input type="text" id="chat-input" class="flex-1 bg-gray-900 border border-green-700 rounded px-2 text-sm focus:outline-none focus:ring-1 focus:ring-green-500" placeholder="رسالتك..."><button id="chat-send-btn" class="bg-green-600 text-black px-4 py-1 rounded hover:bg-green-500 active:scale-95 disabled:bg-gray-600 disabled:cursor-not-allowed">
                    إرسال
                  </button>
                </div>
              </div>
            </div>
          </div>
          <script>
            document.addEventListener("DOMContentLoaded", () => {
              const SCRIPT_BODY = () => {
                
            const FEATURE_FLAGS = {
  "enableLottery": true,
  "enableBetStep": true
};
            const prizes = [
  {
    "text": "VIP\\nACCESS",
    "color": "#8B5CF6",
    "textColor": "#FFFFFF",
    "animatedBorder": true,
    "specialCode": "VIP1"
  },
  {
    "text": "+50%\\nBONUS",
    "color": "#3B82F6",
    "textColor": "#FFFFFF",
    "animatedBorder": false,
    "specialCode": ""
  },
  {
    "text": "100$\\nTO CARD",
    "color": "#FBBF24",
    "textColor": "#1F2937",
    "animatedBorder": true,
    "specialCode": "CASH"
  },
  {
    "text": "NOTHING",
    "color": "#4B5563",
    "textColor": "#E5E7EB",
    "animatedBorder": false,
    "specialCode": ""
  },
  {
    "text": "SLOT\\nACCESS",
    "color": "#EC4899",
    "textColor": "#FFFFFF",
    "animatedBorder": true,
    "specialCode": "SLOT"
  }
];
            const lotteryCodes = {
  "VIP1": 0,
  "CASH": 2,
  "SLOT": 4
};
            const CUSTOM_CONFIG = {
  "currency": "DZD",
  "minBet": "500",
  "maxBet": "3000",
  "winnerMultiplier": "100",
  "vipLink": "#"
};
            const CARDS_CONFIG = [
  {
    "id": "vip",
    "title": "VIP AI PREDICTOR",
    "image": "https://iili.io/KOce6qG.png",
    "showFindGame": true
  },
  {
    "id": "aviator",
    "title": "Aviator AI PREDICTOR",
    "image": "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQqBdX8SuaC1Ws7ZYuCVQstQ4qRi9A_3SWujg&s",
    "showFindGame": true
  },
  {
    "id": "mines",
    "title": "Mines AI PREDICTOR",
    "image": "https://rotativka.com/en/wp-content/uploads/sites/3/2021/06/Mines-Demo.jpg",
    "showFindGame": true
  },
  {
    "id": "penalty",
    "title": "Penalty AI PREDICTOR",
    "image": "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcThYP5CGxc52hWd4ToMHI8MIJhun5BEjHh5LQ&s",
    "showFindGame": true
  },
  {
    "id": "apple",
    "title": "Apple of Fortune AI PREDICTOR",
    "image": "https://play-lh.googleusercontent.com/ezAY-TvV3PlhYWLs8k8czRjWWSdBwFtPrw72fNpS8p6wByC0xBG-Dgt0K5ojieZXrg",
    "showFindGame": true
  },
  {
    "id": "chicken",
    "title": "Chicken Road AI PREDICTOR",
    "image": "https://cdn6.aptoide.com/imgs/1/0/2/1023a04c18a7a91673200703af12a58f_icon.png",
    "showFindGame": true
  },
  {
    "id": "slot-0",
    "title": "MEGA SLOT GAME",
    "image": "https://i.ibb.co/37R6F37/slot1.png",
    "showFindGame": true
  },
  {
    "id": "slot-1",
    "title": "ANOTHER SLOT",
    "image": "https://i.ibb.co/Vvz1D1M/slot2.png",
    "showFindGame": false
  }
];
            const VIDEO_CONFIG = {
  "aviator": {
    "findGame": [
      {
        "url": "https://www.youtube.com/embed/VionWpts3F8"
      },
      {
        "url": "https://youtube.com/embed/qSmuuD4Kmto"
      }
    ],
    "howToUse": [
      {
        "url": "https://www.youtube.com/embed/R9oKm-Yy2h8"
      }
    ]
  },
  "mines": {
    "findGame": [
      {
        "url": "https://youtube.com/embed/lIZc1X4eAlg"
      },
      {
        "url": "https://youtube.com/embed/kxK2AmXTbtk"
      }
    ],
    "howToUse": [
      {
        "url": "https://www.youtube.com/embed/YnbZbhfRpIo"
      }
    ]
  },
  "penalty": {
    "findGame": [
      {
        "url": "https://youtube.com/embed/ztTUO40WokI"
      },
      {
        "url": "https://youtube.com/embed/plJJXi3XWes"
      }
    ],
    "howToUse": [
      {
        "url": "https://www.youtube.com/embed/JSOkZujumoM"
      }
    ]
  },
  "apple": {
    "findGame": [
      {
        "url": "https://youtube.com/embed/-RTJcxOE82U"
      },
      {
        "url": "https://youtube.com/embed/zE4dHLHK9Mo"
      }
    ],
    "howToUse": [
      {
        "url": "https://www.youtube.com/embed/5qRmvocIM8Q"
      }
    ]
  },
  "chicken": {
    "findGame": [
      {
        "url": "https://youtube.com/embed/zMTKdBYz64M"
      },
      {
        "url": "https://youtube.com/embed/FpyFq-QMczo"
      }
    ],
    "howToUse": [
      {
        "url": "https://www.youtube.com/embed/7pu_wBdoxwg"
      }
    ]
  },
  "slot": {
    "findGame": [
      {
        "url": "https://www.youtube.com/embed/dQw4w9WgXcQ"
      },
      {
        "url": "https://www.youtube.com/embed/dQw4w9WgXcQ"
      }
    ],
    "howToUse": [
      {
        "url": "https://www.youtube.com/embed/dQw4w9WgXcQ"
      }
    ]
  }
};
           // Assuming this gets populated

                function generateAndInsertSlotCards() {
                  const slotConfigs = CARDS_CONFIG.filter((c) =>
                    c.id.startsWith("slot-")
                  );
                  if (slotConfigs.length === 0) return;

                  let slotsHtml = "";
                  slotConfigs.forEach((slot, index) => {
                    slotsHtml += `
                           <div class="signal-card locked-card bg-[#0d0d0d] border border-fuchsia-500 rounded-lg overflow-hidden flex flex-col" data-card-type="slot" data-game="${slot.id}">
                             <div class="w-full h-48 overflow-hidden relative">
                               <img src="${slot.image}" alt="${slot.title}" class="card-image w-full h-full object-cover transition-all duration-300"/>
                               <div class="banner-container absolute inset-0 flex items-center justify-center">
                                 <div class="absolute w-[150%] bg-fuchsia-600 text-white text-center font-bold py-2 rotate-12 text-sm shadow-lg"> ${T.needAnotherCode}
                                 </div>
                               </div>
                             </div>
                             <div class="p-4 flex flex-col flex-grow text-center">
                               <h3 class="card-title text-lg font-bold mb-2 flex-grow text-fuchsia-300" style="text-shadow: 0 0 8px #d946ef">
                                 ${slot.title}
                               </h3>
                               <p id="stats-slot-${index}" class="text-sm text-gray-400 mb-3 font-mono leading-tight">
                                 ${T.loadingData}
                               </p>
                               <button class="w-full mt-auto bg-gray-600 text-gray-400 px-4 py-2 cursor-not-allowed" disabled>
                                 ${T.activateButton}
                               </button>
                             </div>
                           </div>
                         `;
                  });

                  const vipCard = document.querySelector(
                    '[data-card-type="vip"]'
                  );
                  if (vipCard) {
                    vipCard.insertAdjacentHTML("afterend", slotsHtml);
                  }
                }

                function applyCardConfigs() {
                  const staticConfigs = CARDS_CONFIG.filter(
                    (c) => !c.id.startsWith("slot-")
                  );

                  staticConfigs.forEach((config) => {
                    const card = document.querySelector(
                      `.signal-card[data-game="${config.id}"]`
                    );
                    if (card) {
                      const titleEl = card.querySelector(".card-title");
                      const imageEl = card.querySelector(".card-image");
                      if (titleEl) titleEl.textContent = config.title;
                      if (imageEl) {
                        imageEl.src = config.image;
                        imageEl.alt = config.title;
                      }
                    }
                  });

                  const vipLink = document.getElementById(
                    "vip-send-message-link"
                  );
                  if (vipLink && CUSTOM_CONFIG.vipLink) {
                    vipLink.href = CUSTOM_CONFIG.vipLink;
                  }
                }

                // Translated Strings Object
                const T = {
                  pageTitle: "متنبئ الذكاء الاصطناعي",
                  mainTitle: "متنبئ الذكاء الاصطناعي",
                  mainButton: "الحصول على إشارات الذكاء الاصطناعي",
                  topWinners: "// طلابي //",
                  availableSignals: "// إشارات الذكاء الاصطناعي //",
                  logoutButton: "تسجيل الخروج",
                  activateButton: "تفعيل",
                  backButton: "رجوع -->", // Adjusted for RTL
                  getBetButton: "الحصول على حجم الرهان",
                  getSignalButton: "الحصول على إشارة",
                  getAnotherButton: "الحصول على إشارة أخرى",
                  startNewGame: "بدء لعبة جديدة",
                  howToUse: "كيفية استخدام المتنبئ",
                  howToFindGame: "كيفية العثور على اللعبة",
                  modalCodesAvailable: "// 3 رموز وصول متاحة لهذا اليوم",
                  modalTypeCode: "اكتب رمز الوصول",
                  modalPlaceholder: "رمز الوصول",
                  modalValidateButton: "تحقق",
                  analyzingData: "جاري تحليل البيانات...",
                  accessDenied: "تم رفض الوصول. الرمز غير صالح.",
                  decryptingSignals: "جاري فك تشفير الإشارات...",
                  accessGranted: "تم منح الوصول",
                  betSuggestion:
                    "راهن بمبلغ يتراوح بين {minBet} {currency} و {maxBet} {currency}",
                  signalRevealed:
                    "إشارة الذكاء الاصطناعي: تم الكشف عن 5 خلايا آمنة",
                  signalTargetZone:
                    "إشارة الذكاء الاصطناعي: المنطقة المستهدفة {zone}",
                  signalTargetZoneWithCount:
                    "إشارة الذكاء الاصطناعي: المنطقة المستهدفة {zone} ({count} إشارات متبقية)",
                  signalSelectRow:
                    "إشارة الذكاء الاصطناعي: اختر رقم الصف {finalSignal}",
                  signalSelectRowWithCount:
                    "إشارة الذكاء الاصطناعي: اختر رقم الصف {finalSignal} ({count} إشارات متبقية)",
                  signalClickGo:
                    'إشارة الذكاء الاصطناعي: انقر على "انطلق" {signalSteps} مرات',
                  chatTitle: "// دردشة مباشرة //",
                  chatPlaceholder: "رسالتك...",
                  chatSendButton: "إرسال",
                  chatLimitReached: "تم الوصول إلى حد الرسائل",
                  signalsPerSec: "إشارات/ثانية:",
                  successRate: "معدل النجاح:",
                  needAnotherCode: "تحتاج إلى رمز وصول آخر",
                  gridSize: "حجم الشبكة",
                  mineCount: "عدد الألغام",
                  difficulty: "الصعوبة",
                  loadingData: "// جاري تحميل البيانات... //",
                  videoOf: "فيديو {current} من {total}",
                  betConsoleMessages: [
                    "جاري الاتصال بتدفق البيانات...",
                    "جاري تحليل تقلبات السوق...",
                    "جاري حساب نسبة المخاطرة إلى المكافأة...",
                    "جاري تشغيل النموذج التنبؤي v3.4...",
                    "جاري تحديد حجم الرهان...",
                    "نجاح: تم حساب معلمات الرهان.",
                  ],
                  aviatorSignalConsoleMessages: [
                    "بدء تحليل مسار الطيران...",
                    "معالجة متجهات الخروج في الوقت الفعلي...",
                    "المعايرة لتباين الغلاف الجوي...",
                    "مقارنة البيانات التاريخية...",
                    "تثبيت الإشارة...",
                    "نجاح: تم الحصول على إشارة المضاعف.",
                  ],
                  minesSignalConsoleMessages: [
                    "بدء تشغيل ماسح الشبكة...",
                    "تخطيط مصفوفة الاحتمالات...",
                    "تنفيذ فحص التشابك الكمي...",
                    "تحديد مجموعات الخلايا منخفضة المخاطر...",
                    "عزل المسار الآمن...",
                    "نجاح: تم تحديد 5 خلايا آمنة.",
                  ],
                  penaltySignalConsoleMessages: [
                    "الوصول إلى الأنماط العصبية لحارس المرمى...",
                    "حساب احتمالات مسار التسديدة...",
                    "تحليل ظروف الرياح والميدان...",
                    "تحديد أضعف نقطة دفاعية...",
                    "تم تحديد الهدف...",
                    "نجاح: تم التنبؤ بمنطقة التسديد المثلى.",
                  ],
                  appleSignalConsoleMessages: [
                    "بدء خوارزمية الحظ...",
                    "مسح شجرة الاحتمالات...",
                    "المزامنة مع مولد الأرقام العشوائية الكمي...",
                    "تحليل أنماط الحظ القديمة...",
                    "جني النتيجة...",
                    "نجاح: تم تحديد النتيجة المحظوظة.",
                  ],
                  chickenSignalConsoleMessages: [
                    "تحليل أنماط سلوك الدجاج...",
                    "حساب المسار الأمثل...",
                    "تجنب عقبات المزرعة...",
                    "التنبؤ بحركات الثعلب...",
                    "عبور الطريق...",
                    "نجاح: تم تحديد المسار الآمن.",
                  ],
                  slotSignalConsoleMessages: [
                    "بدء خوارزمية Slot v2.1...",
                    "تحليل احتمالات البكرات...",
                    "حساب تردد تشغيل المكافأة...",
                    "مقارنة بيانات RTP...",
                    "تثبيت عدد الدورات...",
                    "نجاح: تم الحصول على عدد الدورات الأمثل للمكافأة.",
                  ],
                  fakeMessages: [
                    // Translated examples
                    "من جرب ضربات الجزاء؟ أي حظ",
                    "أفياتور نار اليوم، حصلت على 5x بالفعل!!",
                    "هل هناك أي رموز ترويجية يا شباب؟؟",
                    "هل هذا شرعي حتى؟ يبدو مشبوهاً",
                    "يا مسؤول أضف إشارات Lucky Jet من فضلك",
                    "لعبة الألغام رائعة، فقط لا تكن طماعًا",
                    "هل يبيع أحد حسابًا؟ سأشتري",
                    "لا أستطيع فهم طريق الدجاجة، أي دليل؟",
                    "هذا أفضل متنبئ رأيته على الإطلاق",
                    "تحية للشاكين، ضاعفت رصيدي الليلة",
                    "لماذا لا يعمل رمز الوصول الخاص بي",
                    "تفاحة الحظ قوية جدًا",
                    "سحبت 100$ للتو، شكرًا للذكاء الاصطناعي",
                    "هذا يبدو وكأنه غش هههه",
                    "ما هو معدل النجاح لديكم اليوم يا شباب",
                    "ضربات الجزاء أخطأت واحدة معي لكن ما زلت رابحًا",
                    "تذكروا إدارة المخاطر يا جماعة",
                    "اللعنة، كنت على بعد خطوة واحدة في الألغام...",
                    "الدردشة تتحرك بسرعة كبيرة",
                    "هل هناك مجموعة VIP؟",
                    "هههههه أحدهم يبكي في الزاوية",
                    "فقط اتبع الإشارة ولا تفكر كثيرًا",
                    "إنها تعمل. ببساطة.",
                    "صديقي أخبرني عن هذا الموقع بالأمس",
                    "كم عدد الإشارات في اليوم؟",
                    "أنا جديد هنا، ما الأمر؟",
                    "أخيرًا أداة تعمل بالفعل",
                    "أحتاج إلى المزيد من رموز الوصول",
                    "وصلت للتو إلى 10x في أفياتور، هيا بنااا",
                    "هل هذا الشيء آمن للاستخدام؟",
                    "يبدو الخادم بطيئًا بعض الشيء اليوم",
                    "هههههه خسرت كل شيء، كن حذرًا",
                    "صرفت 50 دولارًا، ليست سيئة كبداية",
                    "واجهة المستخدم رائعة جدًا، أشعر وكأنني في فيلم",
                    "اللعنة، كان يجب أن أتوقف مبكرًا",
                    "هل يوجد أحد من أوروبا هنا؟",
                    "نظام رمز الوصول ذكي",
                    "من هو المسؤول هنا؟ لدي سؤال",
                    "هذا أفضل بكثير من قنوات تيليجرام الاحتيالية",
                    "طريق الدجاجة لا يقدر بثمن هههه، إنه ممتع",
                    "في انتظار الإشارة التالية...",
                    "سأراهن بكل شيء، تمنوا لي الحظ",
                    "هل يمكنني استخدام هذا على هاتفي؟",
                    "قلبي يتسارع في كل مرة ألعب فيها الألغام",
                    "يجب أن يكون الذكاء الاصطناعي مجنونًا للتنبؤ بهذا",
                  ],
                  qaPairs: [
                    // Translated examples
                    { q: "هل هذا مجاني؟", a: "نعم الإشارات مجانية حاليًا" },
                    {
                      q: "كيف أحصل على رمز وصول جديد؟",
                      a: "أعتقد أنها تتجدد يوميًا",
                    },
                    {
                      q: "هل جرب أحد تفاحة الحظ؟ هل هي مربحة؟",
                      a: "إنها كذلك ولكن المخاطرة عالية",
                    },
                    {
                      q: "صديقي لا يستطيع الدخول، هل الموقع معطل؟",
                      a: "يعمل معي، ربما جرب VPN",
                    },
                    {
                      q: "ماذا يحدث إذا خسرت؟",
                      a: "إنه جزء من اللعبة يا رجل، لا تراهن بأكثر مما تستطيع خسارته",
                    },
                    {
                      q: "هل يمكن حظري لاستخدام هذا؟",
                      a: "لا، إنه مجرد متنبئ وليس اختراقًا",
                    },
                    {
                      q: "أي نصائح للألغام؟",
                      a: "نعم، ابدأ برهانات صغيرة ولا تكن طماعًا",
                    },
                    {
                      q: "ما هي أفضل استراتيجية لضربات الجزاء؟",
                      a: "انتظر الإشارات ذات الاحتمالية العالية، لا تستعجل",
                    },
                    {
                      q: "ما مدى دقة هذا الشيء حقًا",
                      a: "جيد جدًا بالنسبة لي، حوالي 8/10 انتصارات",
                    },
                    {
                      q: "هل يوجد تطبيق لهذا؟",
                      a: "ليس بعد، لكن الموقع يعمل بشكل جيد على الهاتف المحمول",
                    },
                    {
                      q: "لماذا تم حظر رسالتي؟",
                      a: "أعتقد أن المستخدمين الجدد لديهم حد لمنع البريد العشوائي",
                    },
                  ],
                  userReplies: [
                    // Translated examples
                    'مرحبًا <span class="font-bold text-red-500">@{username}</span> فقط حاول وتدرب وستعتاد على الأمر',
                    '<span class="font-bold text-red-500">@{username}</span> لا توجد استراتيجية واحدة، الذكاء الاصطناعي يتكيف دائمًا، فقط شاهد وتعلم',
                  ],
                };
                const mainContent = document.getElementById("main-content"),
                  appContainer = document.getElementById("app-container"),
                  signalsSection = document.getElementById("signals-section"),
                  gameView = document.getElementById("game-view"),
                  openModalBtn = document.getElementById("openModalBtn"),
                  accessModal = document.getElementById("accessModal"),
                  modalContainer = document.getElementById("modalContainer"),
                  closeModalBtn = document.getElementById("closeModalBtn"),
                  accessCodeInput = document.getElementById("accessCode"),
                  validateBtn = document.getElementById("validateBtn"),
                  formContent = document.getElementById("formContent"),
                  statusContent = document.getElementById("statusContent"),
                  statusText = document.getElementById("statusText"),
                  errorMessage = document.getElementById("errorMessage"),
                  chatToggleBtn = document.getElementById("chat-toggle-btn"),
                  chatCloseBtn = document.getElementById("chat-close-btn"),
                  chatWidget = document.getElementById("chat-widget"),
                  chatOverlay = document.getElementById("chat-overlay"),
                  chatMessages = document.getElementById("chat-messages"),
                  chatInput = document.getElementById("chat-input"),
                  chatSendBtn = document.getElementById("chat-send-btn"),
                  logoutBtn = document.getElementById("logoutBtn");
                let chatInterval;
                const aviatorMultiplier =
                    document.getElementById("aviator-multiplier"),
                  aviatorBetSuggestion = document.getElementById(
                    "aviator-bet-suggestion"
                  ),
                  aviatorGetBetBtn = document.getElementById(
                    "aviator-get-bet-btn"
                  ),
                  aviatorGetSignalBtn = document.getElementById(
                    "aviator-get-signal-btn"
                  ),
                  aviatorActionsInitial = document.getElementById(
                    "aviator-actions-initial"
                  ),
                  aviatorGetAnotherBtn = document.getElementById(
                    "aviator-get-another-btn"
                  ),
                  aviatorConsoleOutput =
                    document.getElementById("aviator-console");
                let aviatorSignalCount =
                    parseInt(localStorage.getItem("aviatorSignalCount")) || 0,
                  multiplierAnimation;
                const minesGridContainer = document.getElementById(
                    "mines-grid-container"
                  ),
                  minesBetSuggestion = document.getElementById(
                    "mines-bet-suggestion"
                  ),
                  minesGetBetBtn = document.getElementById("mines-get-bet-btn"),
                  minesGetSignalBtn = document.getElementById(
                    "mines-get-signal-btn"
                  ),
                  minesActionsInitial = document.getElementById(
                    "mines-actions-initial"
                  ),
                  minesGetAnotherBtn = document.getElementById(
                    "mines-get-another-btn"
                  ),
                  minesConsoleOutput = document.getElementById("mines-console");
                let minesState = { gridSize: 5, mineCount: 3 };
                const penaltyTargetZones = document
                    .getElementById("game-screen-penalty")
                    .querySelectorAll(".penalty-target-zone"),
                  penaltyBetSuggestion = document.getElementById(
                    "penalty-bet-suggestion"
                  ),
                  penaltyGetBetBtn = document.getElementById(
                    "penalty-get-bet-btn"
                  ),
                  penaltyGetSignalBtn = document.getElementById(
                    "penalty-get-signal-btn"
                  ),
                  penaltyActionsInitial = document.getElementById(
                    "penalty-actions-initial"
                  ),
                  penaltyStartNewGameBtn = document.getElementById(
                    "penalty-start-new-game-btn"
                  ),
                  penaltyConsoleOutput =
                    document.getElementById("penalty-console");
                let penaltySignalCountInRound = 0;
                const appleSignalDisplay = document.getElementById(
                    "apple-signal-display"
                  ),
                  appleBetSuggestion = document.getElementById(
                    "apple-bet-suggestion"
                  ),
                  appleGetBetBtn = document.getElementById("apple-get-bet-btn"),
                  appleGetSignalBtn = document.getElementById(
                    "apple-get-signal-btn"
                  ),
                  appleActionsInitial = document.getElementById(
                    "apple-actions-initial"
                  ),
                  appleStartNewGameBtn = document.getElementById(
                    "apple-start-new-game-btn"
                  ),
                  appleConsoleOutput = document.getElementById("apple-console");
                let appleSignalCountInRound = 0;
                const chickenIcon = document.getElementById("chicken-icon"),
                  chickenRoadTrack =
                    document.getElementById("chicken-road-track"),
                  chickenBetSuggestion = document.getElementById(
                    "chicken-bet-suggestion"
                  ),
                  chickenGetBetBtn = document.getElementById(
                    "chicken-get-bet-btn"
                  ),
                  chickenGetSignalBtn = document.getElementById(
                    "chicken-get-signal-btn"
                  ),
                  chickenActionsInitial = document.getElementById(
                    "chicken-actions-initial"
                  ),
                  chickenGetAnotherBtn = document.getElementById(
                    "chicken-get-another-btn"
                  ),
                  chickenConsoleOutput =
                    document.getElementById("chicken-console");
                let chickenState = { difficulty: "Easy", currentStep: 0 };
                const STOVE_WIDTH = 128; // Keep as is, relates to layout

                function applyVideoConfigs() {
                  for (const gameKey in VIDEO_CONFIG) {
                    const gameVideos = VIDEO_CONFIG[gameKey];
                    if (gameVideos.findGame && gameVideos.findGame.length > 0) {
                      const webIframe = document.getElementById(
                        `${gameKey}-find-game-web-iframe`
                      );
                      if (webIframe && gameVideos.findGame[0]) {
                        webIframe.src = gameVideos.findGame[0].url;
                      }

                      const appIframe = document.getElementById(
                        `${gameKey}-find-game-app-iframe`
                      );
                      if (appIframe && gameVideos.findGame[1]) {
                        appIframe.src = gameVideos.findGame[1].url;
                      }
                    }
                  }
                }

                // Initialize card data first
                generateAndInsertSlotCards();
                applyCardConfigs();
                applyVideoConfigs(); // Apply video URLs after structure is ready

                if (!FEATURE_FLAGS.enableLottery) {
                  const lotteryBtn = document.getElementById("lotteryBtn");
                  if (lotteryBtn) lotteryBtn.style.display = "none";
                }

                function applyUnlocks() {
                  const vipUnlocked =
                    localStorage.getItem("vipUnlocked") === "true";
                  const slotUnlocked =
                    localStorage.getItem("slotUnlocked") === "true";

                  const vipCard = document.querySelector(
                    '[data-card-type="vip"]'
                  );
                  if (vipCard && vipUnlocked) {
                    vipCard.classList.remove("locked-card");
                    const bannerContainer =
                      vipCard.querySelector(".banner-container");
                    if (bannerContainer) bannerContainer.remove();
                    const button = vipCard.querySelector("button");
                    button.disabled = false;
                    button.classList.remove(
                      "bg-gray-600",
                      "text-gray-400",
                      "cursor-not-allowed"
                    );
                    button.classList.add(
                      "bg-yellow-500",
                      "text-black",
                      "hover:bg-yellow-400",
                      "active:scale-95",
                      "activate-btn"
                    );
                    button.textContent = "دخول VIP"; // Translated
                  }

                  const slotCards = document.querySelectorAll(
                    '[data-card-type="slot"]'
                  );
                  slotCards.forEach((slotCard) => {
                    if (slotCard && slotUnlocked) {
                      slotCard.classList.remove("locked-card");
                      const bannerContainer =
                        slotCard.querySelector(".banner-container");
                      if (bannerContainer) bannerContainer.remove();
                      const button = slotCard.querySelector("button");
                      button.disabled = false;
                      button.classList.remove(
                        "bg-gray-600",
                        "text-gray-400",
                        "cursor-not-allowed"
                      );
                      button.classList.add(
                        "bg-fuchsia-500",
                        "text-black",
                        "hover:bg-fuchsia-400",
                        "active:scale-95",
                        "activate-btn"
                      );
                      button.textContent = T.activateButton; // Use T object
                    }
                  });
                }

                function checkAccessSession() {
                  const e = localStorage.getItem("accessGrantedTimestamp");
                  if (e) {
                    const t = new Date().getTime();
                    if (t - parseInt(e) < 144e5) {
                      // 4 hours validity
                      mainContent.classList.add("hidden");
                      appContainer.classList.remove("hidden");
                      applyUnlocks();
                      // Check if promo should be shown on session resume
                      if (!sessionStorage.getItem("promoShownThisSession")) {
                        // Delay slightly to ensure UI is ready
                        setTimeout(() => {
                          showPromoModal();
                          sessionStorage.setItem(
                            "promoShownThisSession",
                            "true"
                          );
                        }, 1000);
                      }
                      startPromoInterval(); // Restart interval on session resume
                    } else {
                      localStorage.removeItem("accessGrantedTimestamp");
                      localStorage.removeItem("vipUnlocked");
                      localStorage.removeItem("slotUnlocked");
                      sessionStorage.removeItem("promoShownThisSession"); // Clear promo flag on session expiry
                      // Don't reload, let the user re-enter code if needed
                      mainContent.classList.remove("hidden");
                      appContainer.classList.add("hidden");
                    }
                  } else {
                    mainContent.classList.remove("hidden");
                    appContainer.classList.add("hidden");
                  }
                }
                const handleValidation = () => {
                  const code = accessCodeInput.value.trim();
                  let accessGranted = false;
                  let unlockType = null; // To track what was unlocked

                  localStorage.removeItem("vipUnlocked");
                  localStorage.removeItem("slotUnlocked");

                  // Simplified access codes for example - Replace with actual logic
                  if (code === "1337") {
                    // Example Slot code
                    localStorage.setItem("slotUnlocked", "true");
                    accessGranted = true;
                    unlockType = "slot";
                  } else if (code === "8564") {
                    // Example VIP code
                    localStorage.setItem("vipUnlocked", "true");
                    accessGranted = true;
                    unlockType = "vip";
                  } else if (code === "2282") {
                    // Example General access code
                    accessGranted = true;
                    unlockType = "general";
                  }
                  // Add more codes as needed...

                  if (accessGranted) {
                    localStorage.setItem(
                      "accessGrantedTimestamp",
                      new Date().getTime().toString() // Store as string
                    );
                    formContent.classList.add("hidden");
                    statusContent.classList.remove("hidden");
                    statusText.textContent = T.decryptingSignals;
                    setTimeout(() => {
                      statusText.textContent = T.accessGranted;
                      statusText.classList.remove("animate-pulse");
                      setTimeout(() => {
                        closeModal();
                        mainContent.classList.add("hidden");
                        appContainer.classList.remove("hidden");
                        applyUnlocks(); // Apply unlocks based on localStorage
                        // Show promo only once per session after successful login
                        if (!sessionStorage.getItem("promoShownThisSession")) {
                          showPromoModal();
                          sessionStorage.setItem(
                            "promoShownThisSession",
                            "true"
                          );
                        }
                        startPromoInterval(); // Start the interval after login
                      }, 1e3); // 1 second after "Access Granted"
                    }, 2500); // 2.5 seconds for "Decrypting"
                  } else {
                    errorMessage.textContent = T.accessDenied;
                    accessCodeInput.value = "";
                    modalContainer.classList.add("shake");
                    setTimeout(
                      () => modalContainer.classList.remove("shake"),
                      500
                    );
                  }
                };
                const openModal = () => {
                  accessModal.classList.remove("hidden");
                  setTimeout(() => accessCodeInput.focus(), 50);
                };
                const closeModal = () => {
                  accessModal.classList.add("hidden");
                  // Reset modal state after transition
                  setTimeout(() => {
                    formContent.classList.remove("hidden");
                    statusContent.classList.add("hidden");
                    statusText.classList.add("animate-pulse"); // Restore animation
                    errorMessage.textContent = "";
                    accessCodeInput.value = "";
                  }, 300); // Match transition duration if any
                };
                function showGameView(gameId) {
                  signalsSection.classList.add("hidden");
                  gameView.classList.remove("hidden");
                  document
                    .querySelectorAll(".game-screen")
                    .forEach((t) => t.classList.add("hidden"));

                  const cardConfig = CARDS_CONFIG.find((c) => c.id === gameId);
                  if (!cardConfig) {
                    console.error("Card config not found for:", gameId);
                    // Maybe show a default error message or go back?
                    showSignalsView();
                    return;
                  }

                  const gameScreenId = gameId.startsWith("slot-")
                    ? "game-screen-slot"
                    : `game-screen-${gameId}`;
                  const gameScreen = document.getElementById(gameScreenId);

                  if (gameScreen) {
                    const gameTitleEl = gameScreen.querySelector(".game-title");
                    if (gameTitleEl) {
                      gameTitleEl.textContent = cardConfig.title; // Set title from config
                    }

                    gameScreen.classList.remove("hidden");
                    gameScreen.classList.add("flex"); // Ensure flex display

                    // Handle video tutorial vs predictor view visibility
                    const videoSection = gameScreen.querySelector(
                      ".video-tutorial-section"
                    );
                    const predictorSection =
                      gameScreen.querySelector(".predictor-section");

                    // Check if cardConfig defines showing the find game video
                    const showFindGameTutorial =
                      cardConfig.showFindGame !== false; // Default to true if not specified

                    if (videoSection && predictorSection) {
                      if (showFindGameTutorial) {
                        videoSection.classList.remove("hidden");
                        predictorSection.classList.add("hidden");
                      } else {
                        videoSection.classList.add("hidden");
                        predictorSection.classList.remove("hidden");
                        predictorSection.classList.add("flex"); // Ensure flex display
                      }
                    } else if (predictorSection) {
                      // If no video section exists, just show predictor
                      predictorSection.classList.remove("hidden");
                      predictorSection.classList.add("flex");
                    }
                  } else {
                    console.error(
                      "Game screen not found for ID:",
                      gameScreenId
                    );
                    showSignalsView(); // Go back if screen doesn't exist
                    return;
                  }

                  // Reset specific game states
                  if (gameId === "aviator") resetAviatorGame();
                  else if (gameId === "mines") resetMinesGame();
                  else if (gameId === "penalty") resetPenaltyGame();
                  else if (gameId === "apple") resetAppleGame();
                  else if (gameId === "chicken") resetChickenGame();
                  else if (gameId.startsWith("slot-")) resetSlotGame(); // Handle generic slot reset
                }
                function showSignalsView() {
                  gameView.classList.add("hidden");
                  signalsSection.classList.remove("hidden");
                  // Stop any ongoing game animations if necessary
                  clearInterval(multiplierAnimation);
                  cancelAnimationFrame(animationFrameId); // Stop lottery animation if open
                  cancelAnimationFrame(confettiAnimationId); // Stop confetti
                }
                function runConsoleSimulation(e, t, n) {
                  if (!e) return;
                  const o = e.querySelector("div");
                  if (!o) return;
                  o.innerHTML = ""; // Clear previous messages
                  let a = 0;
                  const s = setInterval(() => {
                    if (a < t.length) {
                      const p = document.createElement("p");
                      p.textContent = `> ${t[a]}`;
                      // Add success class styling
                      if (
                        t[a].startsWith("نجاح") ||
                        t[a].startsWith("SUCCESS")
                      ) {
                        // Check both original and translated
                        p.classList.add("success");
                      }
                      o.appendChild(p);
                      o.scrollTop = o.scrollHeight; // Scroll to bottom
                      a++;
                    } else {
                      clearInterval(s);
                      if (n) n(); // Execute callback after simulation ends
                    }
                  }, 300); // Interval between messages
                }

                // --- Game Reset and Logic Functions ---
                function resetAviatorGame() {
                  clearInterval(multiplierAnimation); // Stop any ongoing animation
                  aviatorMultiplier.textContent = "x1.00";
                  aviatorMultiplier.classList.remove(
                    "multiplier-rising",
                    "multiplier-final"
                  );
                  aviatorBetSuggestion.textContent = "";
                  if (
                    aviatorConsoleOutput &&
                    aviatorConsoleOutput.querySelector("div")
                  ) {
                    aviatorConsoleOutput.querySelector("div").innerHTML = "";
                  }
                  aviatorActionsInitial.classList.remove("hidden");
                  aviatorActionsInitial.classList.add("flex"); // Ensure it's flex if it was hidden as flex
                  aviatorGetAnotherBtn.classList.add("hidden");

                  if (FEATURE_FLAGS.enableBetStep) {
                    aviatorGetBetBtn.style.display = ""; // Show bet button
                    aviatorGetBetBtn.disabled = false;
                    aviatorGetBetBtn.classList.remove("btn-disabled");

                    aviatorGetSignalBtn.disabled = true;
                    aviatorGetSignalBtn.classList.add("btn-disabled");
                    // Ensure signal button doesn't have active styles when disabled
                    aviatorGetSignalBtn.classList.remove(
                      "bg-green-600",
                      "text-black",
                      "hover:bg-green-500"
                    );
                  } else {
                    aviatorGetBetBtn.style.display = "none"; // Hide bet button

                    aviatorGetSignalBtn.disabled = false;
                    aviatorGetSignalBtn.classList.remove("btn-disabled");
                    // Apply active styles and make full width
                    aviatorGetSignalBtn.classList.add(
                      "bg-green-600",
                      "text-black",
                      "hover:bg-green-500",
                      "w-full"
                    );
                  }
                }
                aviatorGetBetBtn.addEventListener("click", () => {
                  aviatorGetBetBtn.disabled = true;
                  aviatorGetBetBtn.classList.add("btn-disabled");
                  aviatorBetSuggestion.textContent = T.analyzingData; // Use T object
                  runConsoleSimulation(
                    aviatorConsoleOutput,
                    T.betConsoleMessages, // Use T object
                    () => {
                      const minBet = CUSTOM_CONFIG.minBet || 1; // Default values if not set
                      const maxBet = CUSTOM_CONFIG.maxBet || 100;
                      const currency = CUSTOM_CONFIG.currency || "$";
                      aviatorBetSuggestion.textContent = T.betSuggestion // Use T object
                        .replace("{minBet}", minBet)
                        .replace("{maxBet}", maxBet)
                        .replace(/{currency}/g, currency);

                      aviatorGetSignalBtn.disabled = false;
                      aviatorGetSignalBtn.classList.remove("btn-disabled");
                      aviatorGetSignalBtn.classList.add(
                        "bg-green-600",
                        "text-black",
                        "hover:bg-green-500"
                      );
                    }
                  );
                });
                aviatorGetSignalBtn.addEventListener("click", () => {
                  if (aviatorGetSignalBtn.disabled) return;
                  aviatorGetSignalBtn.disabled = true;
                  aviatorGetSignalBtn.classList.add("btn-disabled");
                  aviatorBetSuggestion.textContent = T.analyzingData; // Use T object

                  runConsoleSimulation(
                    aviatorConsoleOutput,
                    T.aviatorSignalConsoleMessages, // Use T object
                    () => {
                      let targetMultiplier;
                      aviatorSignalCount++;
                      localStorage.setItem(
                        "aviatorSignalCount",
                        aviatorSignalCount.toString()
                      );

                      // Example logic: Lower multipliers more often initially
                      if (aviatorSignalCount <= 7 && Math.random() < 0.8) {
                        // 80% chance for lower multiplier in first 7 signals
                        targetMultiplier = 1.1 + Math.random() * 0.9; // 1.1x to 2.0x
                      } else {
                        targetMultiplier = 1.5 + Math.random() * 8.5; // 1.5x to 10.0x (adjust range as needed)
                      }
                      // Ensure minimum is 1.01
                      targetMultiplier = Math.max(1.01, targetMultiplier);

                      aviatorBetSuggestion.textContent = ""; // Clear analyzing text

                      const finalMultiplierString = targetMultiplier.toFixed(2);
                      aviatorMultiplier.textContent = `x${finalMultiplierString}`;
                      aviatorMultiplier.classList.remove("multiplier-rising"); // Just show final
                      aviatorMultiplier.classList.add("multiplier-final");

                      aviatorActionsInitial.classList.add("hidden");
                      aviatorGetAnotherBtn.classList.remove("hidden");
                    }
                  );
                });
                aviatorGetAnotherBtn.addEventListener("click", () =>
                  resetAviatorGame()
                );

                function resetMinesGame() {
                  // Update dropdown display based on current state
                  const gridSizeSelectDisplay = document.querySelector(
                    '[data-select-id="grid-size"] .selected-option'
                  );
                  const mineCountSelectDisplay = document.querySelector(
                    '[data-select-id="mine-count"] .selected-option'
                  );
                  if (gridSizeSelectDisplay)
                    gridSizeSelectDisplay.textContent = `${minesState.gridSize}x${minesState.gridSize}`;
                  if (mineCountSelectDisplay)
                    mineCountSelectDisplay.textContent =
                      minesState.mineCount.toString();

                  renderMinesGrid(); // Render grid based on current state
                  minesBetSuggestion.textContent = "";
                  if (
                    minesConsoleOutput &&
                    minesConsoleOutput.querySelector("div")
                  ) {
                    minesConsoleOutput.querySelector("div").innerHTML = "";
                  }
                  minesActionsInitial.classList.remove("hidden");
                  minesActionsInitial.classList.add("flex");
                  minesGetAnotherBtn.classList.add("hidden");

                  if (FEATURE_FLAGS.enableBetStep) {
                    minesGetBetBtn.style.display = "";
                    minesGetBetBtn.disabled = false;
                    minesGetBetBtn.classList.remove("btn-disabled");
                    minesGetSignalBtn.disabled = true;
                    minesGetSignalBtn.classList.add("btn-disabled");
                    minesGetSignalBtn.classList.remove(
                      "bg-green-600",
                      "text-black",
                      "hover:bg-green-500"
                    );
                  } else {
                    minesGetBetBtn.style.display = "none";
                    minesGetSignalBtn.disabled = false;
                    minesGetSignalBtn.classList.remove("btn-disabled");
                    minesGetSignalBtn.classList.add(
                      "bg-green-600",
                      "text-black",
                      "hover:bg-green-500",
                      "w-full"
                    );
                  }
                }
                function renderMinesGrid() {
                  minesGridContainer.innerHTML = "";
                  const gridSize = minesState.gridSize;
                  minesGridContainer.className = `grid gap-1 sm:gap-2 w-full max-w-md aspect-square`; // Use template literals
                  minesGridContainer.style.gridTemplateColumns = `repeat(${gridSize}, minmax(0, 1fr))`;

                  for (let i = 0; i < gridSize * gridSize; i++) {
                    const cell = document.createElement("div");
                    cell.className =
                      "mine-cell flex items-center justify-center"; // Removed potential conflict classes
                    // Add data attributes for row/col if needed later:
                    // cell.dataset.row = Math.floor(i / gridSize);
                    // cell.dataset.col = i % gridSize;
                    minesGridContainer.appendChild(cell);
                  }
                }
                minesGetBetBtn.addEventListener("click", () => {
                  minesGetBetBtn.disabled = true;
                  minesGetBetBtn.classList.add("btn-disabled");
                  minesBetSuggestion.textContent = T.analyzingData;
                  runConsoleSimulation(
                    minesConsoleOutput,
                    T.betConsoleMessages,
                    () => {
                      const minBet = CUSTOM_CONFIG.minBet || 1;
                      const maxBet = CUSTOM_CONFIG.maxBet || 100;
                      const currency = CUSTOM_CONFIG.currency || "$";
                      minesBetSuggestion.textContent = T.betSuggestion
                        .replace("{minBet}", minBet)
                        .replace("{maxBet}", maxBet)
                        .replace(/{currency}/g, currency);
                      minesGetSignalBtn.disabled = false;
                      minesGetSignalBtn.classList.remove("btn-disabled");
                      minesGetSignalBtn.classList.add(
                        "bg-green-600",
                        "text-black",
                        "hover:bg-green-500"
                      );
                    }
                  );
                });
                minesGetSignalBtn.addEventListener("click", () => {
                  if (minesGetSignalBtn.disabled) return;
                  minesGetSignalBtn.disabled = true;
                  minesGetSignalBtn.classList.add("btn-disabled");
                  minesBetSuggestion.textContent = T.analyzingData;

                  runConsoleSimulation(
                    minesConsoleOutput,
                    T.minesSignalConsoleMessages,
                    () => {
                      const cells =
                        minesGridContainer.querySelectorAll(".mine-cell");
                      const totalCells = cells.length;
                      const indices = Array.from(Array(totalCells).keys());

                      // Simple shuffle
                      for (let i = indices.length - 1; i > 0; i--) {
                        const j = Math.floor(Math.random() * (i + 1));
                        [indices[i], indices[j]] = [indices[j], indices[i]];
                      }

                      // Select 5 distinct safe cells to reveal
                      const safeIndices = indices.slice(0, 5); // Ensure we don't try to reveal more than available

                      minesBetSuggestion.textContent = T.signalRevealed; // Use T object

                      safeIndices.forEach((index) => {
                        if (cells[index]) {
                          cells[index].classList.add("safe");
                        }
                      });

                      minesActionsInitial.classList.add("hidden");
                      minesGetAnotherBtn.classList.remove("hidden");
                    }
                  );
                });
                minesGetAnotherBtn.addEventListener("click", () =>
                  resetMinesGame()
                );

                function resetPenaltyGame() {
                  penaltyTargetZones.forEach((zone) => {
                    zone.classList.remove("highlight");
                    zone.style.transform = ""; // Reset transform
                  });
                  penaltyBetSuggestion.textContent = "";
                  penaltySignalCountInRound = 0; // Reset counter for the round
                  if (
                    penaltyConsoleOutput &&
                    penaltyConsoleOutput.querySelector("div")
                  ) {
                    penaltyConsoleOutput.querySelector("div").innerHTML = "";
                  }
                  penaltyActionsInitial.classList.remove("hidden");
                  penaltyActionsInitial.classList.add("flex");
                  penaltyStartNewGameBtn.classList.add("hidden"); // Hide "Start New Game"

                  if (FEATURE_FLAGS.enableBetStep) {
                    penaltyGetBetBtn.style.display = "";
                    penaltyGetBetBtn.disabled = false;
                    penaltyGetBetBtn.classList.remove("btn-disabled");
                    penaltyGetSignalBtn.disabled = true;
                    penaltyGetSignalBtn.classList.add("btn-disabled");
                    penaltyGetSignalBtn.classList.remove(
                      "bg-green-600",
                      "text-black",
                      "hover:bg-green-500"
                    );
                  } else {
                    penaltyGetBetBtn.style.display = "none";
                    penaltyGetSignalBtn.disabled = false;
                    penaltyGetSignalBtn.classList.remove("btn-disabled");
                    penaltyGetSignalBtn.classList.add(
                      "bg-green-600",
                      "text-black",
                      "hover:bg-green-500",
                      "w-full"
                    );
                  }
                }
                penaltyGetBetBtn.addEventListener("click", () => {
                  penaltyGetBetBtn.disabled = true;
                  penaltyGetBetBtn.classList.add("btn-disabled");
                  penaltyBetSuggestion.textContent = T.analyzingData;
                  runConsoleSimulation(
                    penaltyConsoleOutput,
                    T.betConsoleMessages,
                    () => {
                      const minBet = CUSTOM_CONFIG.minBet || 1;
                      const maxBet = CUSTOM_CONFIG.maxBet || 100;
                      const currency = CUSTOM_CONFIG.currency || "$";
                      penaltyBetSuggestion.textContent = T.betSuggestion
                        .replace("{minBet}", minBet)
                        .replace("{maxBet}", maxBet)
                        .replace(/{currency}/g, currency);
                      penaltyGetSignalBtn.disabled = false;
                      penaltyGetSignalBtn.classList.remove("btn-disabled");
                      penaltyGetSignalBtn.classList.add(
                        "bg-green-600",
                        "text-black",
                        "hover:bg-green-500"
                      );
                    }
                  );
                });
                penaltyGetSignalBtn.addEventListener("click", () => {
                  if (penaltyGetSignalBtn.disabled) return;
                  penaltyGetSignalBtn.disabled = true; // Disable temporarily during animation/processing
                  penaltyBetSuggestion.textContent = T.analyzingData;

                  runConsoleSimulation(
                    penaltyConsoleOutput,
                    T.penaltySignalConsoleMessages,
                    () => {
                      // Remove previous highlight
                      penaltyTargetZones.forEach((zone) => {
                        zone.classList.remove("highlight");
                        zone.style.transform = ""; // Reset transform
                      });

                      // Select a random zone
                      const randomIndex = Math.floor(
                        Math.random() * penaltyTargetZones.length
                      );
                      const targetZoneElement = penaltyTargetZones[randomIndex];

                      if (targetZoneElement) {
                        targetZoneElement.classList.add("highlight");
                        // Apply scale transform for emphasis
                        if (targetZoneElement.dataset.zone === "3") {
                          // Special handling for center if needed
                          targetZoneElement.style.transform =
                            "translateX(-50%) scale(1.1)";
                        } else {
                          targetZoneElement.style.transform = "scale(1.1)";
                        }

                        penaltySignalCountInRound++;
                        const signalsLeft = 5 - penaltySignalCountInRound;

                        penaltyBetSuggestion.textContent =
                          T.signalTargetZoneWithCount // Use T object
                            .replace("{zone}", targetZoneElement.dataset.zone)
                            .replace("{count}", signalsLeft);

                        if (penaltySignalCountInRound === 1) {
                          // Show "Start New Game" after first signal
                          penaltyStartNewGameBtn.classList.remove("hidden");
                        }

                        if (signalsLeft <= 0) {
                          // If round ends
                          // Keep signal button disabled
                          penaltyGetSignalBtn.classList.add("btn-disabled");
                          // Optionally auto-reset after a delay or wait for "Start New Game" click
                          // setTimeout(() => resetPenaltyGame(), 3000);
                        } else {
                          // Re-enable signal button for next shot
                          penaltyGetSignalBtn.disabled = false;
                        }
                      } else {
                        // Handle error case where targetZoneElement is not found
                        penaltyBetSuggestion.textContent =
                          "Error generating signal.";
                        penaltyGetSignalBtn.disabled = false; // Re-enable if error
                      }
                    }
                  );
                });
                penaltyStartNewGameBtn.addEventListener("click", () =>
                  resetPenaltyGame()
                );

                function resetAppleGame() {
                  appleSignalDisplay.textContent = "#";
                  appleSignalDisplay.classList.remove("number-signal-display"); // Remove highlight
                  appleBetSuggestion.textContent = "";
                  appleSignalCountInRound = 0;
                  if (
                    appleConsoleOutput &&
                    appleConsoleOutput.querySelector("div")
                  ) {
                    appleConsoleOutput.querySelector("div").innerHTML = "";
                  }
                  appleActionsInitial.classList.remove("hidden");
                  appleActionsInitial.classList.add("flex");
                  appleStartNewGameBtn.classList.add("hidden");

                  if (FEATURE_FLAGS.enableBetStep) {
                    appleGetBetBtn.style.display = "";
                    appleGetBetBtn.disabled = false;
                    appleGetBetBtn.classList.remove("btn-disabled");
                    appleGetSignalBtn.disabled = true;
                    appleGetSignalBtn.classList.add("btn-disabled");
                    appleGetSignalBtn.classList.remove(
                      "bg-green-600",
                      "text-black",
                      "hover:bg-green-500"
                    );
                  } else {
                    appleGetBetBtn.style.display = "none";
                    appleGetSignalBtn.disabled = false;
                    appleGetSignalBtn.classList.remove("btn-disabled");
                    appleGetSignalBtn.classList.add(
                      "bg-green-600",
                      "text-black",
                      "hover:bg-green-500",
                      "w-full"
                    );
                  }
                }
                appleGetBetBtn.addEventListener("click", () => {
                  appleGetBetBtn.disabled = true;
                  appleGetBetBtn.classList.add("btn-disabled");
                  appleBetSuggestion.textContent = T.analyzingData;
                  runConsoleSimulation(
                    appleConsoleOutput,
                    T.betConsoleMessages,
                    () => {
                      const minBet = CUSTOM_CONFIG.minBet || 1;
                      const maxBet = CUSTOM_CONFIG.maxBet || 100;
                      const currency = CUSTOM_CONFIG.currency || "$";
                      appleBetSuggestion.textContent = T.betSuggestion
                        .replace("{minBet}", minBet)
                        .replace("{maxBet}", maxBet)
                        .replace(/{currency}/g, currency);
                      appleGetSignalBtn.disabled = false;
                      appleGetSignalBtn.classList.remove("btn-disabled");
                      appleGetSignalBtn.classList.add(
                        "bg-green-600",
                        "text-black",
                        "hover:bg-green-500"
                      );
                    }
                  );
                });
                appleGetSignalBtn.addEventListener("click", () => {
                  if (appleGetSignalBtn.disabled) return;
                  appleGetSignalBtn.disabled = true; // Disable during processing
                  appleBetSuggestion.textContent = T.analyzingData;

                  runConsoleSimulation(
                    appleConsoleOutput,
                    T.appleSignalConsoleMessages,
                    () => {
                      appleSignalDisplay.classList.remove(
                        "number-signal-display"
                      ); // Remove old style

                      // Simulate generating the signal (1 to 5)
                      const finalSignal = Math.floor(Math.random() * 5) + 1;
                      appleSignalDisplay.textContent = finalSignal;
                      appleSignalDisplay.classList.add("number-signal-display"); // Add style

                      appleSignalCountInRound++;
                      const signalsLeft = 10 - appleSignalCountInRound; // Apple game typically has 10 levels

                      appleBetSuggestion.textContent =
                        T.signalSelectRowWithCount // Use T object
                          .replace("{finalSignal}", finalSignal)
                          .replace("{count}", signalsLeft);

                      if (appleSignalCountInRound === 1) {
                        // Show "Start New Game" after first signal
                        appleStartNewGameBtn.classList.remove("hidden");
                      }

                      if (signalsLeft <= 0) {
                        // If round ends (10 signals given)
                        // Keep signal button disabled
                        appleGetSignalBtn.classList.add("btn-disabled");
                        // Optionally auto-reset after a delay or wait for "Start New Game" click
                        // setTimeout(() => resetAppleGame(), 3000);
                      } else {
                        // Re-enable signal button for next level/signal
                        appleGetSignalBtn.disabled = false;
                      }
                    }
                  );
                });
                appleStartNewGameBtn.addEventListener("click", () =>
                  resetAppleGame()
                );

                function resetChickenGame() {
                  const difficultySelectDisplay = document.querySelector(
                    '[data-select-id="chicken-difficulty"] .selected-option'
                  );
                  if (difficultySelectDisplay) {
                    // Translate difficulty state back for display if needed
                    let displayDifficulty = chickenState.difficulty;
                    if (chickenState.difficulty === "Easy")
                      displayDifficulty = "سهل";
                    else if (chickenState.difficulty === "Medium")
                      displayDifficulty = "متوسط";
                    else if (chickenState.difficulty === "Hard")
                      displayDifficulty = "صعب";
                    else if (chickenState.difficulty === "Hardcore")
                      displayDifficulty = "صعب جداً";
                    difficultySelectDisplay.textContent = displayDifficulty;
                  }

                  chickenState.currentStep = 0;
                  renderChickenStoves(true); // Force redraw from start
                  chickenBetSuggestion.textContent = "";
                  if (
                    chickenConsoleOutput &&
                    chickenConsoleOutput.querySelector("div")
                  ) {
                    chickenConsoleOutput.querySelector("div").innerHTML = "";
                  }
                  chickenActionsInitial.classList.remove("hidden");
                  chickenActionsInitial.classList.add("flex");
                  chickenGetAnotherBtn.classList.add("hidden");

                  if (FEATURE_FLAGS.enableBetStep) {
                    chickenGetBetBtn.style.display = "";
                    chickenGetBetBtn.disabled = false;
                    chickenGetBetBtn.classList.remove("btn-disabled");
                    chickenGetSignalBtn.disabled = true;
                    chickenGetSignalBtn.classList.add("btn-disabled");
                    chickenGetSignalBtn.classList.remove(
                      "bg-green-600",
                      "text-black",
                      "hover:bg-green-500"
                    );
                  } else {
                    chickenGetBetBtn.style.display = "none";
                    chickenGetSignalBtn.disabled = false;
                    chickenGetSignalBtn.classList.remove("btn-disabled");
                    chickenGetSignalBtn.classList.add(
                      "bg-green-600",
                      "text-black",
                      "hover:bg-green-500",
                      "w-full"
                    );
                  }
                }
                function renderChickenStoves(forceRedraw = false) {
                  if (forceRedraw) {
                    chickenRoadTrack.innerHTML = ""; // Clear existing stoves
                    // Add initial set of stoves (e.g., 10)
                    for (let i = 0; i < 10; i++) {
                      const stove = document.createElement("div");
                      stove.className =
                        "chicken-stove absolute w-24 h-24 rounded-md";
                      // Position stoves along the track
                      stove.style.left = `${i * STOVE_WIDTH}px`;
                      stove.style.top = "50%";
                      stove.style.transform = "translateY(-50%)";
                      chickenRoadTrack.appendChild(stove);
                    }
                  }

                  // Reset chicken position and track scroll
                  const initialChickenOffset =
                    STOVE_WIDTH * 1.5 - chickenIcon.offsetWidth / 2; // Center on second stove visually
                  chickenIcon.style.left = `${initialChickenOffset}px`;
                  chickenIcon.style.transform = "translateY(-50%)"; // Reset vertical position
                  chickenRoadTrack.style.transform = `translateX(0px)`; // Reset track scroll
                }
                async function animateChicken(steps) {
                  for (let i = 0; i < steps; i++) {
                    chickenState.currentStep++;

                    // Animate chicken jump up
                    chickenIcon.style.transform =
                      "translateY(-100%) scale(1.1)";
                    await new Promise((resolve) => setTimeout(resolve, 100)); // Short delay for jump up

                    // Move track smoothly
                    chickenRoadTrack.style.transform = `translateX(-${
                      chickenState.currentStep * STOVE_WIDTH
                    }px)`;
                    await new Promise((resolve) => setTimeout(resolve, 100)); // Delay for track movement

                    // Animate chicken land down
                    chickenIcon.style.transform = "translateY(-50%) scale(1)";
                    await new Promise((resolve) => setTimeout(resolve, 100)); // Short delay for landing

                    // Add a new stove at the end to keep the track populated
                    const newStove = document.createElement("div");
                    newStove.className =
                      "chicken-stove absolute w-24 h-24 rounded-md";
                    const lastStove = chickenRoadTrack.lastChild;
                    const newLeft =
                      (lastStove
                        ? parseFloat(lastStove.style.left)
                        : -STOVE_WIDTH) + STOVE_WIDTH;
                    newStove.style.left = `${newLeft}px`;
                    newStove.style.top = "50%";
                    newStove.style.transform = "translateY(-50%)";
                    chickenRoadTrack.appendChild(newStove);
                  }
                  // Show 'Get Another Signal' button after animation completes
                  chickenActionsInitial.classList.add("hidden");
                  chickenGetAnotherBtn.classList.remove("hidden");
                }
                chickenGetBetBtn.addEventListener("click", () => {
                  chickenGetBetBtn.disabled = true;
                  chickenGetBetBtn.classList.add("btn-disabled");
                  chickenBetSuggestion.textContent = T.analyzingData;
                  runConsoleSimulation(
                    chickenConsoleOutput,
                    T.betConsoleMessages,
                    () => {
                      const minBet = CUSTOM_CONFIG.minBet || 1;
                      const maxBet = CUSTOM_CONFIG.maxBet || 100;
                      const currency = CUSTOM_CONFIG.currency || "$";
                      chickenBetSuggestion.textContent = T.betSuggestion
                        .replace("{minBet}", minBet)
                        .replace("{maxBet}", maxBet)
                        .replace(/{currency}/g, currency);
                      chickenGetSignalBtn.disabled = false;
                      chickenGetSignalBtn.classList.remove("btn-disabled");
                      chickenGetSignalBtn.classList.add(
                        "bg-green-600",
                        "text-black",
                        "hover:bg-green-500"
                      );
                    }
                  );
                });
                chickenGetSignalBtn.addEventListener("click", () => {
                  if (chickenGetSignalBtn.disabled) return;
                  chickenGetSignalBtn.disabled = true;
                  chickenGetSignalBtn.classList.add("btn-disabled");
                  chickenBetSuggestion.textContent = T.analyzingData;

                  runConsoleSimulation(
                    chickenConsoleOutput,
                    T.chickenSignalConsoleMessages,
                    () => {
                      let maxSteps = 12; // Default for Easy
                      switch (chickenState.difficulty) {
                        case "Medium":
                          maxSteps = 10;
                          break;
                        case "Hard":
                          maxSteps = 8;
                          break;
                        case "Hardcore":
                          maxSteps = 4;
                          break;
                        default:
                          maxSteps = 12; // Easy
                      }
                      // Generate random steps within the difficulty limit
                      const signalSteps =
                        Math.floor(Math.random() * maxSteps) + 1; // 1 to maxSteps

                      chickenBetSuggestion.textContent =
                        T.signalClickGo.replace("{signalSteps}", signalSteps); // Use T object
                      animateChicken(signalSteps); // Start animation
                    }
                  );
                });
                chickenGetAnotherBtn.addEventListener("click", () =>
                  resetChickenGame()
                );

                function resetSlotGame() {
                  const gameScreen =
                    document.getElementById("game-screen-slot");
                  if (!gameScreen) return;

                  const slotNumber = gameScreen.querySelector(".slot-number");
                  const slotBetSuggestion = gameScreen.querySelector(
                    ".bet-suggestion-text"
                  );
                  const slotConsoleOutput =
                    gameScreen.querySelector(".game-console");
                  const slotActionsInitial = gameScreen.querySelector(
                    ".slot-actions-initial"
                  );
                  const slotGetAnotherBtn = gameScreen.querySelector(
                    ".slot-get-another-btn"
                  );
                  const slotGetBetBtn =
                    gameScreen.querySelector(".slot-get-bet-btn");
                  const slotGetSignalBtn = gameScreen.querySelector(
                    ".slot-get-signal-btn"
                  );

                  if (slotNumber) slotNumber.textContent = "#";
                  if (slotBetSuggestion) slotBetSuggestion.textContent = "";
                  if (
                    slotConsoleOutput &&
                    slotConsoleOutput.querySelector("div")
                  ) {
                    slotConsoleOutput.querySelector("div").innerHTML = "";
                  }
                  if (slotActionsInitial) {
                    slotActionsInitial.classList.remove("hidden");
                    slotActionsInitial.classList.add("flex");
                  }
                  if (slotGetAnotherBtn)
                    slotGetAnotherBtn.classList.add("hidden");

                  if (FEATURE_FLAGS.enableBetStep) {
                    if (slotGetBetBtn) slotGetBetBtn.style.display = "";
                    if (slotGetBetBtn) slotGetBetBtn.disabled = false;
                    if (slotGetBetBtn)
                      slotGetBetBtn.classList.remove("btn-disabled");

                    if (slotGetSignalBtn) slotGetSignalBtn.disabled = true;
                    if (slotGetSignalBtn)
                      slotGetSignalBtn.classList.add("btn-disabled");
                    if (slotGetSignalBtn)
                      slotGetSignalBtn.classList.remove(
                        "bg-green-600",
                        "text-black",
                        "hover:bg-green-500"
                      );
                  } else {
                    if (slotGetBetBtn) slotGetBetBtn.style.display = "none";

                    if (slotGetSignalBtn) slotGetSignalBtn.disabled = false;
                    if (slotGetSignalBtn)
                      slotGetSignalBtn.classList.remove("btn-disabled");
                    if (slotGetSignalBtn)
                      slotGetSignalBtn.classList.add(
                        "bg-green-600",
                        "text-black",
                        "hover:bg-green-500",
                        "w-full"
                      );
                  }
                }
                gameView.addEventListener("click", (e) => {
                  const target = e.target;
                  const gameScreen = target.closest("#game-screen-slot");
                  if (!gameScreen) return; // Exit if not inside the slot game screen

                  const slotBetSuggestion = gameScreen.querySelector(
                    ".bet-suggestion-text"
                  );
                  const slotConsoleOutput =
                    gameScreen.querySelector(".game-console");
                  const slotGetSignalBtn = gameScreen.querySelector(
                    ".slot-get-signal-btn"
                  );
                  const slotNumber = gameScreen.querySelector(".slot-number");
                  const slotActionsInitial = gameScreen.querySelector(
                    ".slot-actions-initial"
                  );
                  const slotGetAnotherBtn = gameScreen.querySelector(
                    ".slot-get-another-btn"
                  );

                  if (target.matches(".slot-get-bet-btn")) {
                    const slotGetBetBtn = target;
                    slotGetBetBtn.disabled = true;
                    slotGetBetBtn.classList.add("btn-disabled");
                    slotBetSuggestion.textContent = T.analyzingData;
                    runConsoleSimulation(
                      slotConsoleOutput,
                      T.betConsoleMessages,
                      () => {
                        const minBet = CUSTOM_CONFIG.minBet || 1;
                        const maxBet = CUSTOM_CONFIG.maxBet || 100;
                        const currency = CUSTOM_CONFIG.currency || "$";
                        slotBetSuggestion.textContent = T.betSuggestion
                          .replace("{minBet}", minBet)
                          .replace("{maxBet}", maxBet)
                          .replace(/{currency}/g, currency);
                        slotGetSignalBtn.disabled = false;
                        slotGetSignalBtn.classList.remove("btn-disabled");
                        slotGetSignalBtn.classList.add(
                          "bg-green-600",
                          "text-black",
                          "hover:bg-green-500"
                        );
                      }
                    );
                  }

                  if (target.matches(".slot-get-signal-btn")) {
                    if (slotGetSignalBtn.disabled) return;
                    slotGetSignalBtn.disabled = true;
                    slotGetSignalBtn.classList.add("btn-disabled");
                    slotBetSuggestion.textContent = T.analyzingData;

                    runConsoleSimulation(
                      slotConsoleOutput,
                      T.slotSignalConsoleMessages, // Use dedicated slot messages
                      () => {
                        let spinCount = 0;
                        // Quick number flashing animation
                        const animationInterval = setInterval(() => {
                          spinCount = Math.floor(Math.random() * 16) + 5; // Random number between 5-20
                          if (slotNumber) slotNumber.textContent = spinCount;
                        }, 100);

                        // Stop flashing and show final result after 2.5 seconds
                        setTimeout(() => {
                          clearInterval(animationInterval);
                          const finalSpinCount =
                            Math.floor(Math.random() * 16) + 5; // Final random number 5-20
                          if (slotNumber)
                            slotNumber.textContent = finalSpinCount;
                          // Update suggestion text with the final count
                          if (slotBetSuggestion)
                            slotBetSuggestion.textContent = `إشارة الذكاء الاصطناعي: أدر ${finalSpinCount} مرات للحصول على المكافأة`; // Specific translated message
                          if (slotActionsInitial)
                            slotActionsInitial.classList.add("hidden");
                          if (slotGetAnotherBtn)
                            slotGetAnotherBtn.classList.remove("hidden");
                        }, 2500); // Duration of flashing animation
                      }
                    );
                  }

                  if (target.matches(".slot-get-another-btn")) {
                    resetSlotGame();
                  }
                });

                function generateRandomUsername() {
                  // Simple username generation
                  return `user_${Math.floor(Math.random() * 90000) + 10000}`;
                }
                let usedMessages = []; // Track used messages to avoid repetition
                const toggleChat = (show) => {
                  if (show) {
                    chatWidget.classList.remove("hidden");
                    chatToggleBtn.classList.add("hidden");
                    chatOverlay.classList.remove("hidden");
                    chatMessages.scrollTop = chatMessages.scrollHeight; // Scroll to bottom when opening
                  } else {
                    chatWidget.classList.add("hidden");
                    chatToggleBtn.classList.remove("hidden");
                    chatOverlay.classList.add("hidden");
                  }
                };
                const addMessageToChat = (
                  username,
                  message,
                  isUser = false
                ) => {
                  const messageElement = document.createElement("div");
                  messageElement.classList.add("text-sm", "break-words"); // break-words for long messages

                  // Different styling for user vs others
                  if (isUser) {
                    messageElement.innerHTML = `<span class="font-bold text-red-500">${username}:</span> <span class="text-red-400">${message}</span>`;
                  } else {
                    messageElement.innerHTML = `<span class="font-bold text-cyan-400">${username}:</span> <span>${message}</span>`;
                  }

                  chatMessages.appendChild(messageElement);

                  // Auto-scroll only if chat is open and user is near the bottom
                  const isScrolledToBottom =
                    chatMessages.scrollHeight - chatMessages.clientHeight <=
                    chatMessages.scrollTop + 30; // 30px tolerance
                  if (
                    !chatWidget.classList.contains("hidden") &&
                    isScrolledToBottom
                  ) {
                    chatMessages.scrollTop = chatMessages.scrollHeight;
                  }
                };
                const getUniqueRandomMessage = () => {
                  // Filter out already used messages
                  let availableMessages = T.fakeMessages.filter(
                    (msg) => !usedMessages.includes(msg)
                  );

                  // If less than 5 unique messages left, reset the used list
                  if (availableMessages.length < 5) {
                    usedMessages = [];
                    availableMessages = T.fakeMessages;
                  }

                  // Pick a random message from available ones
                  const randomIndex = Math.floor(
                    Math.random() * availableMessages.length
                  );
                  const selectedMessage = availableMessages[randomIndex];

                  // Add the selected message to the used list
                  usedMessages.push(selectedMessage);
                  return selectedMessage;
                };
                const startChatSimulation = () => {
                  if (chatInterval) return; // Prevent multiple intervals

                  const simulateMessage = () => {
                    if (Math.random() < 0.25) {
                      // 25% chance for a Q&A pair
                      const qaPair =
                        T.qaPairs[Math.floor(Math.random() * T.qaPairs.length)];
                      const questionUser = generateRandomUsername();
                      addMessageToChat(questionUser, qaPair.q);

                      // Simulate a delayed answer
                      setTimeout(() => {
                        const answerUser = generateRandomUsername();
                        // Add @mention to the answer
                        const answerText = `<span class="font-bold text-cyan-400">@${questionUser}</span> ${qaPair.a}`;
                        addMessageToChat(answerUser, answerText);
                      }, Math.random() * 10000 + 5000); // 5-15 seconds delay
                    } else {
                      // 75% chance for a regular fake message
                      const username = generateRandomUsername();
                      const message = getUniqueRandomMessage();
                      addMessageToChat(username, message);
                    }

                    // Schedule the next message
                    const nextInterval = Math.random() * 8000 + 3000; // 3-11 seconds
                    chatInterval = setTimeout(simulateMessage, nextInterval);
                  };

                  // Start the first message simulation
                  simulateMessage();
                };
                // User State Initialization
                let user = {
                  username: localStorage.getItem("ai_predictor_username"),
                  messageCount:
                    parseInt(localStorage.getItem("ai_predictor_msg_count")) ||
                    0,
                };
                if (!user.username) {
                  user.username = `user_${
                    Math.floor(Math.random() * 90000) + 10000
                  }`;
                  localStorage.setItem("ai_predictor_username", user.username);
                }
                const checkUserBlock = () => {
                  const messageLimit = 2; // Limit users to 2 messages
                  if (user.messageCount >= messageLimit) {
                    chatInput.disabled = true;
                    chatSendBtn.disabled = true;
                    chatInput.placeholder = T.chatLimitReached; // Use T object
                    chatSendBtn.classList.add(
                      "disabled:bg-gray-600",
                      "disabled:cursor-not-allowed"
                    );
                  } else {
                    chatInput.disabled = false;
                    chatSendBtn.disabled = false;
                    chatInput.placeholder = T.chatPlaceholder; // Use T object
                    chatSendBtn.classList.remove(
                      "disabled:bg-gray-600",
                      "disabled:cursor-not-allowed"
                    );
                  }
                };
                const handleUserMessage = () => {
                  const message = chatInput.value.trim();
                  if (!message || chatInput.disabled) return; // Don't send empty or if disabled

                  addMessageToChat(user.username, message, true); // True indicates it's the user's message
                  chatInput.value = ""; // Clear input

                  const currentMessageIndex = user.messageCount; // Store index before incrementing
                  user.messageCount++;
                  localStorage.setItem(
                    "ai_predictor_msg_count",
                    user.messageCount.toString()
                  );

                  // Simulate a reply if within reply limit
                  if (currentMessageIndex < T.userReplies.length) {
                    setTimeout(() => {
                      const reply = T.userReplies[currentMessageIndex].replace(
                        "{username}",
                        user.username
                      );
                      addMessageToChat("AI_Assistant", reply); // Or a generic bot name
                    }, Math.random() * 3000 + 2000); // 2-5 seconds delay
                  }

                  checkUserBlock(); // Check if limit is reached after sending
                };
                // --- Stats Update ---
                const statsConfig = {
                  // Keep original keys, translation happens in updateSignalStats
                  "stats-aviator": {
                    baseSignals: 500,
                    rangeSignals: 500,
                    baseWinRate: 95,
                    rangeWinRate: 3,
                  },
                  "stats-mines": {
                    baseSignals: 300,
                    rangeSignals: 400,
                    baseWinRate: 85,
                    rangeWinRate: 7,
                  },
                  "stats-penalty": {
                    baseSignals: 100,
                    rangeSignals: 100,
                    baseWinRate: 87,
                    rangeWinRate: 8,
                  },
                  "stats-apple": {
                    baseSignals: 400,
                    rangeSignals: 200,
                    baseWinRate: 90,
                    rangeWinRate: 5,
                  },
                  "stats-chicken": {
                    baseSignals: 400,
                    rangeSignals: 200,
                    baseWinRate: 90,
                    rangeWinRate: 5,
                  },
                  "stats-vip": {
                    baseSignals: 1000,
                    rangeSignals: 1000,
                    baseWinRate: 98,
                    rangeWinRate: 1,
                  },
                  "stats-slot": {
                    baseSignals: 1200,
                    rangeSignals: 800,
                    baseWinRate: 97,
                    rangeWinRate: 2,
                  },
                };
                function updateSignalStats() {
                  document.querySelectorAll('[id^="stats-"]').forEach((p) => {
                    const id = p.id;
                    let configKey = id;
                    if (id.startsWith("stats-slot-")) {
                      configKey = "stats-slot"; // Use generic slot config for all slot cards
                    }
                    const config = statsConfig[configKey];

                    if (config) {
                      const signals =
                        config.baseSignals +
                        Math.floor(Math.random() * config.rangeSignals);
                      const winRate = (
                        config.baseWinRate +
                        Math.random() * config.rangeWinRate
                      ).toFixed(1);
                      // Use translated labels from T object
                      p.innerHTML = `${T.signalsPerSec} <span class="text-green-400">${signals}</span><br>${T.successRate} <span class="font-bold text-lime-300">${winRate}%</span>`;
                    } else {
                      p.innerHTML = T.loadingData; // Show loading if config not found
                    }
                  });
                }
                // --- Live Winners Feed ---
                const liveFeedContainer = document.getElementById(
                  "live-feed-container"
                );
                // Keep data structure simple, translation handled in createWinnerElement if needed
                const winnersData = [
                  // Example game data
                  {
                    game: "aviator",
                    icon: "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQqBdX8SuaC1Ws7ZYuCVQstQ4qRi9A_3SWujg&s",
                  },
                  {
                    game: "mines",
                    icon: "https://rotativka.com/en/wp-content/uploads/sites/3/2021/06/Mines-Demo.jpg",
                  },
                  {
                    game: "penalty",
                    icon: "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcThYP5CGxc52hWd4ToMHI8MIJhun5BEjHh5LQ&s",
                  },
                  {
                    game: "apple",
                    icon: "https://play-lh.googleusercontent.com/ezAY-TvV3PlhYWLs8k8czRjWWSdBwFtPrw72fNpS8p6wByC0xBG-Dgt0K5ojieZXrg",
                  }, // Placeholder, use actual icon URL
                  {
                    game: "chicken",
                    icon: "https://cdn6.aptoide.com/imgs/1/0/2/1023a04c18a7a91673200703af12a58f_icon.png",
                  },
                  // Add slot game icons if available
                ];
                let winnersFeed = []; // Array to store current winners
                const MAX_WINNERS_IN_FEED = 20;

                function createWinnerElement(winner) {
                  const div = document.createElement("div");
                  // Note: Adjusted margin for RTL
                  div.className =
                    "winner-item flex-shrink-0 flex items-center bg-gray-900/50 p-2 rounded-md w-52";
                  div.innerHTML = `
                       <img src="${
                         winner.icon
                       }" class="w-10 h-10 rounded-md object-cover rtl:ml-4 ltr:mr-4"> <div class="flex flex-col text-xs overflow-hidden">
                           <span class="text-gray-200 font-bold truncate">${
                             winner.user
                           }</span>
                           <span class="font-bold text-lime-300 text-sm">${
                             winner.amount
                           } ${CUSTOM_CONFIG.currency || "$"}</span>
                       </div>
                   `;
                  return div;
                }
                function generateWinner() {
                  const gameData =
                    winnersData[Math.floor(Math.random() * winnersData.length)];
                  const user = generateRandomUsername();
                  // Generate amount, potentially based on game or make it more varied
                  const amount =
                    Math.round((Math.random() * 8000 + 1000) / 100) *
                    100 *
                    (CUSTOM_CONFIG.winnerMultiplier || 1); // e.g., 1000-9000 rounded to 100s
                  return { icon: gameData.icon, user: user, amount: amount };
                }
                function renderWinnersFeed() {
                  liveFeedContainer.innerHTML = ""; // Clear existing
                  winnersFeed.forEach((winner) => {
                    const element = createWinnerElement(winner);
                    element.style.animation = "none"; // Prevent animation on initial render
                    liveFeedContainer.appendChild(element);
                  });
                }
                function addNewWinner() {
                  const newWinner = generateWinner();
                  winnersFeed.unshift(newWinner); // Add to the beginning

                  // Limit the feed size
                  if (winnersFeed.length > MAX_WINNERS_IN_FEED) {
                    winnersFeed.pop(); // Remove the oldest
                  }

                  // Add new element with animation
                  const newElement = createWinnerElement(newWinner);
                  liveFeedContainer.prepend(newElement); // Add to the start of the container

                  // Remove the oldest element from the DOM if over limit
                  if (liveFeedContainer.children.length > MAX_WINNERS_IN_FEED) {
                    liveFeedContainer.lastChild.remove();
                  }

                  // Schedule the next winner addition
                  const randomDelay = Math.random() * 20000 + 10000; // 10-30 seconds
                  setTimeout(addNewWinner, randomDelay);
                }

                // --- PROMO MODAL START ---
                const promoModal = document.getElementById("promoModal");
                const closePromoModalBtn =
                  document.getElementById("closePromoModalBtn");
                const openLotteryFromPromoBtn = document.getElementById(
                  "openLotteryFromPromoBtn"
                );
                let promoInterval; // To hold the interval ID

                function showPromoModal() {
                  if (!FEATURE_FLAGS.enableLottery || !promoModal) return; // Only show if enabled and exists
                  // Don't show if another modal is already open
                  if (
                    !lotteryModal.classList.contains("hidden") ||
                    !infoModal.classList.contains("hidden") ||
                    !accessModal.classList.contains("hidden")
                  ) {
                    return;
                  }
                  promoModal.classList.remove("hidden");
                  // Optionally disable body scroll
                  // document.body.style.overflow = "hidden";
                }
                function closePromoModal() {
                  if (promoModal) {
                    promoModal.classList.add("hidden");
                    // Re-enable body scroll if it was disabled
                    // document.body.style.overflow = "";
                  }
                }
                function startPromoInterval() {
                  if (!FEATURE_FLAGS.enableLottery) return;
                  clearInterval(promoInterval); // Clear existing interval if any
                  promoInterval = setInterval(() => {
                    // Check if app is visible and no other modals are open
                    if (
                      !appContainer.classList.contains("hidden") &&
                      lotteryModal.classList.contains("hidden") &&
                      infoModal.classList.contains("hidden") &&
                      accessModal.classList.contains("hidden") &&
                      promoModal.classList.contains("hidden")
                    ) {
                      showPromoModal();
                    }
                  }, 300000); // Check every 5 minutes (300,000 ms)
                }
                if (closePromoModalBtn)
                  closePromoModalBtn.addEventListener("click", closePromoModal);
                if (promoModal)
                  promoModal.addEventListener("click", (e) => {
                    if (e.target === promoModal) closePromoModal(); // Close on backdrop click
                  });
                if (openLotteryFromPromoBtn)
                  openLotteryFromPromoBtn.addEventListener("click", () => {
                    closePromoModal();
                    openLotteryModal(); // Assume openLotteryModal function exists
                  });
                // --- PROMO MODAL END ---

                // --- LOTTERY SCRIPT START ---
                // Ensure all lottery elements exist before adding listeners
                const lotteryBtn = document.getElementById("lotteryBtn");
                const lotteryModal = document.getElementById("lotteryModal");
                const closeLotteryModalBtn = document.getElementById(
                  "closeLotteryModalBtn"
                );
                const lotteryCodeInput = document.getElementById("lotteryCode");
                const spinBtn = document.getElementById("spinBtn");
                const spinAgainBtn = document.getElementById("spinAgainBtn");
                const lotteryErrorMessage = document.getElementById(
                  "lotteryErrorMessage"
                );
                const wheelContainer =
                  document.getElementById("wheel-container");
                const canvas = document.getElementById("wheelCanvas");
                const confettiCanvas =
                  document.getElementById("confettiCanvas");
                const lotteryControls =
                  document.getElementById("lottery-controls");
                const lotteryResult = document.getElementById("lottery-result");
                const lotteryResultText =
                  document.getElementById("lotteryResultText");
                const ctx = canvas ? canvas.getContext("2d") : null;
                const confettiCtx = confettiCanvas
                  ? confettiCanvas.getContext("2d")
                  : null;

                const infoBtn = document.getElementById("infoBtn");
                const infoModal = document.getElementById("infoModal");
                const closeInfoModalBtn =
                  document.getElementById("closeInfoModalBtn");

                // Check if crucial elements exist before proceeding
                if (
                  canvas &&
                  ctx &&
                  wheelContainer &&
                  lotteryModal &&
                  confettiCanvas &&
                  confettiCtx
                ) {
                  const numSegments = prizes.length > 0 ? prizes.length : 8; // Default to 8 if prizes not loaded
                  const segmentAngle = (2 * Math.PI) / numSegments;
                  let currentRotation = 0;
                  let isSpinning = false;
                  let shimmerAngle = 0;
                  let animationFrameId; // For idle animation
                  let spinAnimationId; // For spin animation
                  let centerX, centerY, radius;
                  let confettiParticles = [];
                  let confettiAnimationId;

                  function resizeCanvas() {
                    if (!wheelContainer || !canvas || !confettiCanvas) return;
                    const size = Math.min(
                      wheelContainer.clientWidth,
                      wheelContainer.clientHeight
                    ); // Ensure it fits
                    canvas.width = size;
                    canvas.height = size;

                    // Resize confetti canvas based on the modal body for better coverage
                    const modalBody = lotteryModal.querySelector(
                      ".bg-\\[\\#0d0d0d\\]"
                    ); // More specific selector
                    if (modalBody) {
                      confettiCanvas.width = modalBody.clientWidth;
                      confettiCanvas.height = modalBody.clientHeight;
                    } else {
                      // Fallback if specific selector fails
                      confettiCanvas.width = lotteryModal.clientWidth;
                      confettiCanvas.height = lotteryModal.clientHeight;
                    }

                    centerX = canvas.width / 2;
                    centerY = canvas.height / 2;
                    radius = Math.max(0, canvas.width / 2 - 5); // 5px padding
                    drawWheel(); // Redraw after resize
                  }

                  function drawWheel() {
                    if (!ctx || !canvas || prizes.length === 0) return; // Don't draw if no prizes
                    ctx.clearRect(0, 0, canvas.width, canvas.height);
                    ctx.save();
                    ctx.translate(centerX, centerY);
                    ctx.rotate(currentRotation);

                    for (let i = 0; i < numSegments; i++) {
                      const startAngle = i * segmentAngle;
                      const endAngle = startAngle + segmentAngle;

                      ctx.beginPath();
                      ctx.moveTo(0, 0);
                      ctx.arc(0, 0, radius, startAngle, endAngle);
                      ctx.closePath();
                      ctx.fillStyle = prizes[i].color || "#333"; // Default color
                      ctx.fill();

                      // Animated Border Logic (optional)
                      if (prizes[i].animatedBorder) {
                        // ... (Gradient logic as before) ...
                        const gradient = ctx.createConicGradient(
                          shimmerAngle + startAngle,
                          0,
                          0
                        );
                        gradient.addColorStop(0, "#FBBF24");
                        gradient.addColorStop(0.25, "#FDE68A");
                        gradient.addColorStop(0.5, "#FBBF24");
                        gradient.addColorStop(0.75, "#FFFFFF");
                        gradient.addColorStop(1, "#FBBF24");
                        ctx.strokeStyle = gradient;
                        ctx.lineWidth = 6;
                        ctx.stroke();
                      } else {
                        ctx.strokeStyle = "#4B5563"; // Darker border for non-animated
                        ctx.lineWidth = 2;
                        ctx.stroke();
                      }

                      // Draw Text
                      ctx.save();
                      ctx.rotate(startAngle + segmentAngle / 2); // Rotate context for text
                      ctx.textAlign = "center";
                      ctx.textBaseline = "middle";
                      ctx.fillStyle = prizes[i].textColor || "#FFF"; // Default text color
                      const fontSize = Math.max(
                        10,
                        Math.min(16, Math.floor(radius / 14))
                      ); // Responsive font size
                      ctx.font = `bold ${fontSize}px 'Cairo', sans-serif`; // Use Arabic font
                      const text = prizes[i].text || `Prize ${i + 1}`; // Default text

                      const lines = text.split("\n");
                      const textRadius = radius * 0.65; // Position text further out
                      const lineHeight = fontSize * 1.2; // Adjust line height

                      for (let j = 0; j < lines.length; j++) {
                        // Adjust y position based on number of lines
                        ctx.fillText(
                          lines[j],
                          textRadius,
                          (j - (lines.length - 1) / 2) * lineHeight
                        );
                      }
                      ctx.restore(); // Restore context rotation
                    }
                    ctx.restore(); // Restore context translation
                  }

                  function idleLoop() {
                    shimmerAngle += 0.03; // Adjust speed as needed
                    drawWheel();
                    if (!isSpinning) {
                      // Only continue loop if not spinning
                      animationFrameId = requestAnimationFrame(idleLoop);
                    }
                  }

                  function startConfetti() {
                    if (!confettiCanvas || !confettiCtx) return;
                    const colors = [
                      "#fde047",
                      "#f97316",
                      "#22c55e",
                      "#3b82f6",
                      "#a855f7",
                      "#ec4899",
                    ]; // More colors
                    confettiParticles = [];
                    const particleCount = 150; // Number of particles

                    for (let i = 0; i < particleCount; i++) {
                      confettiParticles.push({
                        x: confettiCanvas.width / 2, // Start from center
                        y: confettiCanvas.height / 2,
                        radius: Math.random() * 3 + 2,
                        color:
                          colors[Math.floor(Math.random() * colors.length)],
                        vx: (Math.random() - 0.5) * 25, // Initial velocity x
                        vy: (Math.random() - 0.5) * 25, // Initial velocity y
                        alpha: 1, // Initial opacity
                        // Optional: add rotation or shape variation
                      });
                    }

                    function animateConfetti() {
                      if (!confettiCtx || !confettiCanvas) return;
                      confettiCtx.clearRect(
                        0,
                        0,
                        confettiCanvas.width,
                        confettiCanvas.height
                      );

                      confettiParticles.forEach((p, index) => {
                        p.x += p.vx;
                        p.y += p.vy;
                        p.vy += 0.4; // Gravity effect
                        p.alpha -= 0.008; // Fade out speed

                        // Remove particle if faded or out of bounds (optional)
                        if (p.alpha <= 0 || p.y > confettiCanvas.height) {
                          confettiParticles.splice(index, 1);
                        } else {
                          confettiCtx.globalAlpha = p.alpha;
                          confettiCtx.beginPath();
                          confettiCtx.arc(p.x, p.y, p.radius, 0, Math.PI * 2);
                          confettiCtx.fillStyle = p.color;
                          confettiCtx.fill();
                          confettiCtx.globalAlpha = 1; // Reset alpha
                        }
                      });

                      if (confettiParticles.length > 0) {
                        confettiAnimationId =
                          requestAnimationFrame(animateConfetti);
                      } else {
                        // Optionally clear canvas when done
                        // confettiCtx.clearRect(0, 0, confettiCanvas.width, confettiCanvas.height);
                      }
                    }

                    cancelAnimationFrame(confettiAnimationId); // Clear previous animation
                    animateConfetti();
                  }

                  function spinWheel() {
                    if (isSpinning || prizes.length === 0) return;

                    const code = lotteryCodeInput.value.trim();
                    if (!code) {
                      lotteryErrorMessage.textContent = "الرجاء إدخال الرمز."; // Translated
                      const modalBody = lotteryModal.querySelector(
                        ".bg-\\[\\#0d0d0d\\]"
                      );
                      if (modalBody) {
                        modalBody.classList.add("shake");
                        setTimeout(
                          () => modalBody.classList.remove("shake"),
                          500
                        );
                      }
                      return;
                    }

                    let usedCodes =
                      JSON.parse(sessionStorage.getItem("usedLotteryCodes")) ||
                      [];
                    if (usedCodes.includes(code)) {
                      lotteryErrorMessage.textContent = "تم استخدام هذا الرمز."; // Translated
                      return;
                    }

                    // Check if the code exists in the lotteryCodes object (case-sensitive)
                    if (!lotteryCodes.hasOwnProperty(code)) {
                      lotteryErrorMessage.textContent = "رمز خاطئ."; // Translated
                      const modalBody = lotteryModal.querySelector(
                        ".bg-\\[\\#0d0d0d\\]"
                      );
                      if (modalBody) {
                        modalBody.classList.add("shake");
                        setTimeout(
                          () => modalBody.classList.remove("shake"),
                          500
                        );
                      }
                      return;
                    }

                    // Determine target prize index based on the entered code
                    const targetPrizeIndex = lotteryCodes[code]; // Get the index associated with the code

                    // Validate targetPrizeIndex
                    if (
                      targetPrizeIndex === undefined ||
                      targetPrizeIndex < 0 ||
                      targetPrizeIndex >= numSegments
                    ) {
                      lotteryErrorMessage.textContent =
                        "رمز غير صالح أو تكوين جائزة غير صحيح."; // Translated and added config check
                      return;
                    }

                    // Mark code as used *before* spinning starts
                    usedCodes.push(code);
                    sessionStorage.setItem(
                      "usedLotteryCodes",
                      JSON.stringify(usedCodes)
                    );

                    // --- Start Spinning ---
                    cancelAnimationFrame(animationFrameId); // Stop idle animation
                    lotteryErrorMessage.textContent = ""; // Clear errors
                    isSpinning = true;
                    spinBtn.disabled = true;
                    spinBtn.classList.add(
                      "disabled:bg-gray-600",
                      "disabled:cursor-not-allowed"
                    ); // Add disabled style

                    const randomSpins = Math.floor(Math.random() * 4) + 5; // 5-8 full rotations
                    // Calculate angle to stop at the center of the target segment
                    const targetSegmentCenterAngle =
                      targetPrizeIndex * segmentAngle + segmentAngle / 2;
                    // Add slight random offset within the segment for variability
                    const randomOffset =
                      Math.random() * segmentAngle * 0.6 - segmentAngle * 0.3; // +/- 30% of segment width
                    // Final rotation angle calculation
                    const finalRotation =
                      2 * Math.PI * randomSpins - // Full rotations
                      targetSegmentCenterAngle + // Align with target segment center (negative because rotation is counter-clockwise visually but pointer is fixed)
                      randomOffset; // Add slight offset

                    let start = null;
                    const duration = 6000; // Spin duration in ms
                    const startRotation = currentRotation; // Store rotation at the start of the spin

                    function easeOutQuint(t) {
                      return 1 + --t * t * t * t * t;
                    }

                    function animateSpin(timestamp) {
                      if (!start) start = timestamp;
                      const progress = timestamp - start;
                      const easedProgress = easeOutQuint(
                        Math.min(progress / duration, 1)
                      );

                      currentRotation =
                        startRotation +
                        (finalRotation - startRotation) * easedProgress;
                      shimmerAngle += 0.05; // Keep shimmer effect during spin if needed
                      drawWheel();

                      if (progress < duration) {
                        spinAnimationId = requestAnimationFrame(animateSpin);
                      } else {
                        // --- Spin End ---
                        isSpinning = false;
                        currentRotation %= 2 * Math.PI; // Normalize rotation

                        // Calculate the actual winning index based on final rotation
                        // The pointer is at 3 o'clock (0 radians). We need to calculate which segment aligns with it.
                        // Adjust rotation slightly because 0 angle is the boundary.
                        const adjustedRotation =
                          (currentRotation + segmentAngle / 1000) %
                          (2 * Math.PI);
                        const winningIndex =
                          Math.floor(
                            numSegments - adjustedRotation / segmentAngle
                          ) % numSegments;

                        const winningPrize = prizes[winningIndex];

                        if (lotteryControls)
                          lotteryControls.classList.add("hidden");
                        if (lotteryResultText)
                          lotteryResultText.textContent =
                            winningPrize.text.replace(/\n/g, " "); // Display prize text
                        if (lotteryResult)
                          lotteryResult.classList.remove("hidden");

                        // Trigger confetti only if it's not "NOTHING"
                        if (
                          winningPrize.text &&
                          winningPrize.text.toUpperCase() !== "NOTHING" &&
                          winningPrize.text.toUpperCase() !== "لا شيء"
                        ) {
                          startConfetti();
                        }

                        idleLoop(); // Restart idle animation
                      }
                    }
                    cancelAnimationFrame(spinAnimationId); // Clear previous spin animation frame
                    spinAnimationId = requestAnimationFrame(animateSpin);
                  }

                  function openLotteryModal() {
                    if (!lotteryModal) return;
                    lotteryModal.classList.remove("hidden");
                    // document.body.style.overflow = "hidden"; // Optional: disable body scroll
                    resizeCanvas(); // Ensure canvas is sized correctly

                    // Reset to initial state
                    if (lotteryControls)
                      lotteryControls.classList.remove("hidden");
                    if (lotteryResult) lotteryResult.classList.add("hidden");
                    if (lotteryCodeInput) lotteryCodeInput.value = "";
                    if (lotteryErrorMessage)
                      lotteryErrorMessage.textContent = "";
                    if (spinBtn) {
                      spinBtn.disabled = false;
                      spinBtn.classList.remove(
                        "disabled:bg-gray-600",
                        "disabled:cursor-not-allowed"
                      );
                    }

                    cancelAnimationFrame(spinAnimationId); // Stop any ongoing spin
                    cancelAnimationFrame(confettiAnimationId); // Stop confetti
                    if (confettiCtx && confettiCanvas) {
                      confettiCtx.clearRect(
                        0,
                        0,
                        confettiCanvas.width,
                        confettiCanvas.height
                      ); // Clear confetti canvas
                    }
                    cancelAnimationFrame(animationFrameId); // Stop idle animation before starting new one
                    idleLoop(); // Start idle animation
                  }
                  function closeLotteryModal() {
                    if (!lotteryModal) return;
                    lotteryModal.classList.add("hidden");
                    // document.body.style.overflow = ""; // Re-enable body scroll
                    cancelAnimationFrame(animationFrameId); // Stop idle animation
                    cancelAnimationFrame(spinAnimationId); // Stop spin animation
                    cancelAnimationFrame(confettiAnimationId); // Stop confetti
                  }
                  function handleSpinAgain() {
                    if (lotteryResult) lotteryResult.classList.add("hidden");
                    if (lotteryControls)
                      lotteryControls.classList.remove("hidden");
                    if (lotteryCodeInput) lotteryCodeInput.value = ""; // Clear code input
                    if (lotteryErrorMessage)
                      lotteryErrorMessage.textContent = "";
                    if (spinBtn) {
                      spinBtn.disabled = false; // Re-enable spin button
                      spinBtn.classList.remove(
                        "disabled:bg-gray-600",
                        "disabled:cursor-not-allowed"
                      );
                    }
                    cancelAnimationFrame(confettiAnimationId); // Stop confetti
                    if (confettiCtx && confettiCanvas) {
                      confettiCtx.clearRect(
                        0,
                        0,
                        confettiCanvas.width,
                        confettiCanvas.height
                      ); // Clear confetti canvas
                    }
                    // No need to restart idleLoop here, it should be running if wheel is visible
                  }

                  // Event Listeners for Lottery
                  if (lotteryBtn && FEATURE_FLAGS.enableLottery)
                    lotteryBtn.addEventListener("click", openLotteryModal);
                  if (closeLotteryModalBtn)
                    closeLotteryModalBtn.addEventListener(
                      "click",
                      closeLotteryModal
                    );
                  if (lotteryModal)
                    lotteryModal.addEventListener("click", (e) => {
                      if (e.target === lotteryModal) closeLotteryModal();
                    });
                  if (spinBtn) spinBtn.addEventListener("click", spinWheel);
                  if (spinAgainBtn)
                    spinAgainBtn.addEventListener("click", handleSpinAgain);
                  window.addEventListener("resize", resizeCanvas); // Add resize listener

                  // Info Modal Listeners
                  if (infoBtn) {
                    infoBtn.addEventListener("click", () => {
                      if (infoModal) infoModal.classList.remove("hidden");
                    });
                  }
                  if (closeInfoModalBtn) {
                    closeInfoModalBtn.addEventListener("click", () => {
                      if (infoModal) infoModal.classList.add("hidden");
                    });
                  }
                  if (infoModal) {
                    infoModal.addEventListener("click", (e) => {
                      if (e.target === infoModal)
                        infoModal.classList.add("hidden");
                    });
                  }
                } else {
                  console.error(
                    "Lottery canvas or essential elements not found. Lottery disabled."
                  );
                  if (lotteryBtn) lotteryBtn.style.display = "none"; // Hide button if canvas fails
                }
                // --- LOTTERY SCRIPT END ---

                // --- General Event Listeners ---
                const allCustomSelects =
                  document.querySelectorAll("[data-select-id]");

                signalsSection.addEventListener("click", (e) => {
                  const activateBtn = e.target.closest(".activate-btn");
                  if (activateBtn) {
                    const card = activateBtn.closest(".signal-card");
                    if (card && !card.classList.contains("locked-card")) {
                      const gameId = card.dataset.game;
                      if (gameId) {
                        showGameView(gameId);
                      }
                    }
                  }
                });
                // Custom Select Dropdown Logic
                allCustomSelects.forEach((selectWrapper) => {
                  const trigger = selectWrapper.querySelector(
                    ".custom-select-trigger"
                  );
                  const optionsContainer = selectWrapper.querySelector(
                    ".custom-select-options"
                  );
                  const selectedDisplay =
                    trigger.querySelector(".selected-option");

                  if (!trigger || !optionsContainer || !selectedDisplay) return;

                  trigger.addEventListener("click", (e) => {
                    e.stopPropagation(); // Prevent document click listener from closing immediately
                    // Close other open selects
                    allCustomSelects.forEach((otherWrapper) => {
                      if (otherWrapper !== selectWrapper) {
                        otherWrapper
                          .querySelector(".custom-select-options")
                          .classList.add("hidden");
                      }
                    });
                    // Toggle current select
                    optionsContainer.classList.toggle("hidden");
                  });

                  optionsContainer.addEventListener("click", (e) => {
                    if (
                      e.target.tagName === "DIV" &&
                      e.target.classList.contains("p-2")
                    ) {
                      // Check if a valid option was clicked
                      const newValue = e.target.textContent.trim();
                      selectedDisplay.textContent = newValue; // Update display
                      optionsContainer.classList.add("hidden"); // Close dropdown

                      const selectId = selectWrapper.dataset.selectId;

                      // Update game state based on selection
                      if (selectId === "grid-size") {
                        minesState.gridSize = parseInt(newValue.split("x")[0]);
                        resetMinesGame(); // Reset mines with new grid size
                      } else if (selectId === "mine-count") {
                        minesState.mineCount = parseInt(newValue);
                        resetMinesGame(); // Reset mines with new mine count
                      } else if (selectId === "chicken-difficulty") {
                        // Store the English value for logic, display translated in reset
                        if (newValue === "سهل")
                          chickenState.difficulty = "Easy";
                        else if (newValue === "متوسط")
                          chickenState.difficulty = "Medium";
                        else if (newValue === "صعب")
                          chickenState.difficulty = "Hard";
                        else if (newValue === "صعب جداً")
                          chickenState.difficulty = "Hardcore";
                        else chickenState.difficulty = "Easy"; // Fallback
                        resetChickenGame(); // Reset chicken game
                      }
                    }
                  });
                });
                // Global click listener to close dropdowns
                document.addEventListener("click", () => {
                  allCustomSelects.forEach((selectWrapper) => {
                    selectWrapper
                      .querySelector(".custom-select-options")
                      .classList.add("hidden");
                  });
                });
                // Modal and General Button Listeners
                openModalBtn.addEventListener("click", openModal);
                closeModalBtn.addEventListener("click", closeModal);
                validateBtn.addEventListener("click", handleValidation);
                accessCodeInput.addEventListener("keyup", (e) => {
                  if (e.key === "Enter") handleValidation();
                });
                accessModal.addEventListener("click", (e) => {
                  if (e.target === accessModal) closeModal();
                });

                // Chat Listeners
                chatToggleBtn.addEventListener("click", () => toggleChat(true));
                chatCloseBtn.addEventListener("click", () => toggleChat(false));
                chatOverlay.addEventListener("click", () => toggleChat(false));
                chatSendBtn.addEventListener("click", handleUserMessage);
                chatInput.addEventListener("keyup", (e) => {
                  if (e.key === "Enter") handleUserMessage();
                });

                logoutBtn.addEventListener("click", () => {
                  localStorage.removeItem("accessGrantedTimestamp");
                  localStorage.removeItem("vipUnlocked");
                  localStorage.removeItem("slotUnlocked");
                  localStorage.removeItem("ai_predictor_username"); // Clear username
                  localStorage.removeItem("ai_predictor_msg_count"); // Clear message count
                  sessionStorage.removeItem("usedLotteryCodes"); // Clear used lottery codes for session
                  sessionStorage.removeItem("promoShownThisSession"); // Clear promo flag
                  clearInterval(promoInterval); // Stop promo interval
                  clearInterval(chatInterval); // Stop chat simulation
                  window.location.reload(); // Reload the page
                });

                // Back Buttons in Game Views
                document
                  .querySelectorAll(".back-to-signals-btn")
                  .forEach((button) => {
                    button.addEventListener("click", showSignalsView);
                  });

                // "I Found Game" Buttons
                gameView.addEventListener("click", (e) => {
                  if (e.target.matches(".i-found-game-btn")) {
                    const gameScreen = e.target.closest(".game-screen");
                    if (gameScreen) {
                      const videoSection = gameScreen.querySelector(
                        ".video-tutorial-section"
                      );
                      const predictorSection =
                        gameScreen.querySelector(".predictor-section");
                      if (videoSection && predictorSection) {
                        videoSection.classList.add("hidden");
                        predictorSection.classList.remove("hidden");
                        predictorSection.classList.add("flex"); // Ensure flex display
                      }
                    }
                  }
                });

                // Video Modal Logic
                const videoModal = document.getElementById("videoModal");
                const closeVideoModalBtn =
                  document.getElementById("closeVideoModalBtn");
                const youtubePlayer = document.getElementById("youtube-player");
                const videoModalTitle =
                  document.getElementById("videoModalTitle");
                const prevVideoBtn = document.getElementById("prevVideoBtn");
                const nextVideoBtn = document.getElementById("nextVideoBtn");
                const videoCounter = document.getElementById("video-counter");
                let currentVideoList = [];
                let currentVideoIndex = 0;

                function updateVideoModal() {
                  if (!youtubePlayer || currentVideoList.length === 0) return; // Exit if player or list is missing
                  const videoData = currentVideoList[currentVideoIndex];
                  youtubePlayer.src = videoData.url || ""; // Set src, default to empty if url missing
                  if (videoModalTitle) {
                    videoModalTitle.textContent = videoData.title || ""; // Set title, default to empty
                    videoModalTitle.classList.toggle(
                      "hidden",
                      !videoData.title
                    ); // Hide title if empty
                  }
                  if (videoCounter) {
                    videoCounter.textContent = T.videoOf // Use T object
                      .replace("{current}", currentVideoIndex + 1)
                      .replace("{total}", currentVideoList.length);
                  }

                  // Handle button states and visibility
                  const hasMultipleVideos = currentVideoList.length > 1;
                  if (prevVideoBtn) {
                    prevVideoBtn.disabled = currentVideoIndex === 0;
                    prevVideoBtn.style.display = hasMultipleVideos
                      ? "block"
                      : "none";
                  }
                  if (nextVideoBtn) {
                    nextVideoBtn.disabled =
                      currentVideoIndex === currentVideoList.length - 1;
                    nextVideoBtn.style.display = hasMultipleVideos
                      ? "block"
                      : "none";
                  }
                  if (videoCounter) {
                    videoCounter.style.display = hasMultipleVideos
                      ? "block"
                      : "none";
                  }
                }
                // Add listeners to "How to Use" buttons
                document
                  .querySelectorAll(".open-video-btn")
                  .forEach((button) => {
                    button.addEventListener("click", () => {
                      const videosKey = button.dataset.videosKey; // e.g., 'howToUse'
                      const gameKey = button.dataset.gameKey; // e.g., 'aviator'

                      if (
                        videosKey &&
                        gameKey &&
                        VIDEO_CONFIG[gameKey] &&
                        VIDEO_CONFIG[gameKey][videosKey]
                      ) {
                        currentVideoList = VIDEO_CONFIG[gameKey][videosKey];
                        if (currentVideoList && currentVideoList.length > 0) {
                          currentVideoIndex = 0; // Start from the first video
                          updateVideoModal();
                          if (videoModal) videoModal.classList.remove("hidden");
                        } else {
                          console.warn(
                            `No videos found for ${gameKey} -> ${videosKey}`
                          );
                        }
                      } else {
                        console.warn(
                          `Video config missing for ${gameKey} -> ${videosKey}`
                        );
                      }
                    });
                  });
                const closeVideoModal = () => {
                  if (videoModal) videoModal.classList.add("hidden");
                  if (youtubePlayer) youtubePlayer.src = ""; // Stop video playback
                };
                if (closeVideoModalBtn)
                  closeVideoModalBtn.addEventListener("click", closeVideoModal);
                if (videoModal)
                  videoModal.addEventListener("click", (e) => {
                    if (e.target === videoModal) closeVideoModal();
                  }); // Close on backdrop click
                if (prevVideoBtn)
                  prevVideoBtn.addEventListener("click", () => {
                    if (currentVideoIndex > 0) {
                      currentVideoIndex--;
                      updateVideoModal();
                    }
                  });
                if (nextVideoBtn)
                  nextVideoBtn.addEventListener("click", () => {
                    if (currentVideoIndex < currentVideoList.length - 1) {
                      currentVideoIndex++;
                      updateVideoModal();
                    }
                  });

                // --- Initial Setup Calls ---
                checkAccessSession(); // Check if user already has access
                checkUserBlock(); // Check chat limit
                startChatSimulation(); // Start fake chat messages
                updateSignalStats(); // Initial stats display
                setInterval(updateSignalStats, 2500); // Update stats periodically

                // Initial population of winners feed (run once)
                if (liveFeedContainer) {
                  // Check if container exists
                  winnersFeed = []; // Clear just in case
                  for (let i = 0; i < Math.min(15, MAX_WINNERS_IN_FEED); i++) {
                    // Generate initial winners up to the max
                    winnersFeed.push(generateWinner());
                  }
                  renderWinnersFeed(); // Render the initial batch
                  // Start adding new winners dynamically after a short delay
                  setTimeout(addNewWinner, Math.random() * 5000 + 2000); // Start after 2-7 seconds
                }
              }; // End of SCRIPT_BODY

              SCRIPT_BODY(); // Execute the main script logic
            });
          </script>
        
      
    
